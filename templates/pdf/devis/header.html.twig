
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>New Devis</title>
    <script src="https://kit.fontawesome.com/1a4efb3103.js" crossorigin="anonymous"></script>
    <link rel="icon"
          href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 128 128%22><text y=%221.2em%22 font-size=%2296%22>⚫️</text></svg>">
                <link rel="stylesheet" href="/build/vendors-node_modules_fullcalendar_core_main_js-node_modules_fullcalendar_interaction_main_js--17b8ae.css"><link rel="stylesheet" href="/build/app.css">
    

    <style>
        body .background-body {
            background-image: url(/build/img/etoiles-background.jpg);
            transition: all .25s ease-out 0s;
            position: fixed;
            z-index: 1;
            height: 100%;
            width: 100%;
            display: block;
            top: 0;
            left: 0;
            background-size: cover;
            background-position: 50%;
        }
    </style>
            <script src="/build/runtime.js"></script><script src="/build/vendors-node_modules_jquery_dist_jquery_js.js"></script><script src="/build/vendors-node_modules_fullcalendar_core_main_js-node_modules_fullcalendar_interaction_main_js--17b8ae.js"></script><script src="/build/app.js"></script>
    </head>

<body class="container-fluid">
<div class="container-main">
    <div class="background-body"></div>

    <div id="divLoader">
        <div class="loader">
            <span></span>
            <span></span>
            <span></span>
            <span></span>
            <span></span>
        </div>
    </div>


    <div class="container-main">

        <header class="row header-row">
            <div class="logo col-md-2">
                <a href="/"><img id="company-logo" src="/uploads/logo/j4r_logo.png"
                                                      alt="Logo" srcset=""></a>
                <hr>

            </div>
            <div class="col-md-10 row">
            </div>

            <nav class="col-lg-10">
            </nav>
        </header>


        <div class="row">

            <div class="col-md-2" id="nav-main">
                <div class="nav-user">

                    <ul class="clearfix nav-user-i">
                        <li class=" col-md-4">
                            <a id="leaspect" style="cursor: pointer;">
                                <i class="bi bi-search"></i>
                            </a>
                        </li>
                        <li class="col-md-4">
                            <a href="/user/1">
                                                                    <img style="height: 50px; width: 50px;border-radius: 50%;"
                                         src="/../uploads/photo/1.jpg" alt=""/>
                                                            </a>
                        </li>
                        <li class="col-md-4">
                            <a href="/logout">
                                <i class="bi bi-power"></i>
                            </a>
                        </li>
                    </ul>
                </div>

                <div class="sidebar-wrapper active ps ps--active-y">
    <div class="sidebar-menu">
        <ul class="menu">
            <li class="sidebar-title">Menu</li>

            <li class="sidebar-item ">
                <a href="/" class="sidebar-link">
                    <i class="bi bi-grid-fill"></i>
                    <span>Dashboard</span>
                </a>
            </li>

            <li class="sidebar-title  sidebar-item ">
                <a href="/interlocuteur/interlocuteur/" class="sidebar-link">
                    <span>Interlocuteur</span>
                </a>


                <ul>

                    <li class="sidebar-item ">
                        <a href="/interlocuteur/interlocuteur/client" class="sidebar-link">
                            <i class="bi bi-list-ul"></i>
                            <span>Client</span>
                        </a>
                    </li>
                    <li class="sidebar-item ">
                        <a href="/interlocuteur/interlocuteur/soustraitants"
                           class="sidebar-link">
                            <i class="bi bi-list-ul"></i>
                            <span>Sous traitant</span>
                        </a>
                    </li>
                    <li class="sidebar-item ">
                        <a href="/interlocuteur/interlocuteur/transporteurs" class="sidebar-link">
                            <i class="bi bi-list-ul"></i>
                            <span>Transporteur</span>
                        </a>
                    </li>

                    <li class="sidebar-item ">
                        <a href="/interlocuteur/interlocuteur/fournisseurs" class="sidebar-link">
                            <i class="bi bi-list-ul"></i>
                            <span>Fournisseur</span>
                        </a>
                    </li>

                    <li class="sidebar-item ">
                        <a href="/contact/contact/"
                           class="sidebar-link ">
                            <i class="bi bi-person-lines-fill"></i>
                            <span>Contact</span>
                        </a>
                    </li>

                    <li class="sidebar-item ">
                        <a href="/interlocuteur/activite/" class="sidebar-link">
                            <i class="bi bi-person-lines-fill"></i>
                            <span>Activité</span>
                        </a>
                    </li>
                </ul>

            </li>


            <li class="sidebar-title">
                GED
                <ul>
                    <li class="sidebar-item ">
                        <a href="/ged/fichier/" class="sidebar-link">
                            <i class="bi bi-folder2-open"></i>
                            <span>Fichiers</span>
                        </a>
                    </li>
                    <li class="sidebar-item  ">
                        <a href="/ged/type/fichier/" class="sidebar-link">
                            <i class="bi bi-folder2-open"></i>
                            <span>Type de documents</span>
                        </a>
                    </li>
                    <li class="sidebar-item  ">
                        <a href="/ged/fichier/trash" class="sidebar-link">
                            <i class="bi bi-trash"></i>
                            <span>Corbeille</span>
                        </a>
                    </li>
                </ul>
            </li>


            <li class="sidebar-title">
                Demande
                <ul>
                    <li class="sidebar-item  ">
                        <a href="/demande/"
                           class="sidebar-link  ">
                            <i class="bi bi-list-ul"></i>
                            <span> Liste </span>
                        </a>
                    </li>

                    <li class="sidebar-item ">
                        <a href="#" class="sidebar-link">
                            <i class="bi bi-stack"></i>
                            <span>Taches</span>
                        </a>
                    </li>

                    <li class="sidebar-item ">
                        <a href="#" class="sidebar-link">
                            <i class="bi bi-bar-chart-line"></i>
                            <span>Forecast</span>
                        </a>
                    </li>
                </ul>
            </li>


            <li class="sidebar-title">
                Devis
                <ul>
                    <li class="sidebar-item  ">
                        <a href="/affaire/devis/"
                           class="sidebar-link  ">
                            <i class="bi bi-list-ul"></i>
                            <span> Liste </span>
                        </a>
                    </li>

                    <li class="sidebar-item  ">
                        <a href="/affaire/bibliothequeDePrix/"
                           class="sidebar-link  ">
                            <i class="bi bi-currency-dollar"></i>
                            <span> Bibliothèque de prix </span>
                        </a>
                    </li>



                    <li class="sidebar-item  ">
                        <a href="/affaire/type/composant/"
                           class="sidebar-link  ">
                            <i class="bi bi-currency-dollar"></i>
                            <span> Type de composant </span>
                        </a>
                    </li>

                    <li class="sidebar-item ">
                        <a href="#" class="sidebar-link">
                            <i class="bi bi-stack"></i>
                            <span>Taches</span>
                        </a>
                    </li>

                    <li class="sidebar-item ">
                        <a href="#" class="sidebar-link">
                            <i class="bi bi-bar-chart-line"></i>
                            <span>Forecast</span>
                        </a>
                    </li>
                </ul>
            </li>

            <li class="sidebar-title">
                Chantier
                <ul>
                    <li class="sidebar-item">
                        <a href="#" class="sidebar-link">
                            <i class="bi bi-list-ul"></i>
                            <span> Liste </span>
                        </a>
                    </li>

                    <li class="sidebar-item ">
                        <a href="#" class="sidebar-link">
                            <i class="bi bi-stack"></i>
                            <span>Taches</span>
                        </a>
                    </li>

                    <li class="sidebar-item ">
                        <a href="#" class="sidebar-link">
                            <i class="bi bi-stack"></i>
                            <span>YTD</span>
                        </a>
                    </li>
                </ul>
            </li>


            <li class="sidebar-title">
                Transport

                <ul>
                    <li class="sidebar-item  ">
                        <a href="/affaire/transport/"
                           class="sidebar-link  ">
                            <i class="bi bi-cart-dash-fill"></i>
                            <span> Liste </span>
                        </a>
                    </li>

                </ul>
            </li>


            <li class="sidebar-title">
                Analyse

                <ul>
                    <li class="sidebar-item">
                        <a href="#" class="sidebar-link">
                            <i class="bi bi-clock-history"></i>
                            <span> Chiffres </span>
                        </a>
                    </li>
                    <li class="sidebar-item">
                        <a href="#" class="sidebar-link">
                            <i class="bi bi-stack"></i>
                            <span> Objectifs </span>
                        </a>
                    </li>
                    <li class="sidebar-item">
                        <a href="#" class="sidebar-link">
                            <i class="bi bi-graph-up-arrow"></i>
                            <span> Statistiques </span>
                        </a>
                    </li>
                </ul>
            </li>



            <li class="sidebar-title">
                Inventaire

                <ul>
                    <li class="sidebar-item  ">
                        <a href="/materiel/"
                           class="sidebar-link  ">
                            <i class="bi bi-cart-dash-fill"></i>
                            <span> Liste </span>
                        </a>
                    </li>

                    <li class="sidebar-item ">
                        <a href="/pret/" class="sidebar-link">
                            <i class="bi bi-handbag-fill"></i>
                            <span> Prêts </span>
                        </a>
                    </li>
                </ul>
            </li>

            <li class="sidebar-title">
                Utilisateur
                <ul>
                    <li class="sidebar-item  ">
                        <a href="/user/" class="sidebar-link">
                            <i class="bi bi-list-ul"></i>
                            <span> Liste </span>
                        </a>
                    </li>
                    <li class="sidebar-item  ">
                        <a href="/entite/entite/" class="sidebar-link">
                            <i class="bi bi-stack"></i>
                            <span>Entité</span>
                        </a>
                    </li>
                    <li class="sidebar-item ">
                        <a href="#" class="sidebar-link">
                            <i class="bi bi-stack"></i>
                            <span>LOGS</span>
                        </a>
                    </li>


                </ul>
            </li>


            <li class="sidebar-title">
                Administration
                <ul>
                    <li class="sidebar-item  ">
                        <a href="/affaire/statut/" class="sidebar-link">
                            <i class="bi bi-list-ul"></i>
                            <span> Statuts </span>
                        </a>
                    </li>
                    <li class="sidebar-item  ">
                        <a href="/user/poste/" class="sidebar-link">
                            <i class="bi bi-stack"></i>
                            <span>Postes</span>
                        </a>
                    </li>
                    <li class="sidebar-item  ">
                        <a href="/user/service/" class="sidebar-link">
                            <i class="bi bi-stack"></i>
                            <span>Services</span>
                        </a>
                    </li>



                </ul>
            </li>


        </ul>
    </div>
</div>
            </div>

            <div class="page-content col-md-10">
                <div class="row page-head">
    
    <h2 class="col-lg-6">Création d&#039;un devis - yterytry 8</h2>

    
    </div>

                

        <link rel="stylesheet" href="/build/devis.css">


<style>

    #encadre-marge {
        cursor: pointer;
    }

    #menu-marge {
        display: none;
        position: fixed;
        top: 0;
        right: 0;
        height: 100%;
        width: 40%;
        z-index: 1;
        background: whitesmoke;
        border: 1px solid black;
        color: #0e4377;
    }
</style>

<div class="row justify-content-between">
    <div class="col-md-auto">
        <a href="  ">
            <svg viewBox="0 0 24 24" style="width:50px;" focusable="false" class="chakra-icon css-onkibi"
                 aria-hidden="true">
                <path fill="currentColor" d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"></path>
            </svg>
            Retour
        </a>
    </div>
</div>

<div class="row mt-4">
    <div class="page-block col-md-7 m-auto">

        <form name="devis" method="post">
        <div class="row">
            <div class="col-md-6">
                <div class="row mt-2">
                    <div class="col-md-3 text-end">
                        <label class="labels" for="devis_titre">attr</label>
                    </div>
                    <div class="col-md-9">
                        <input type="text" id="devis_titre" name="devis[titre]" maxlength="255" class="form-control form-control-sm-2" value="yterytry" />
                    </div>
                </div>
            </div>

            <div class="col-md-6">
                <div class="row mt-2">
                    <div class="col-md-3 text-end labels">
                        <label class="labels" for="devis_description">Description</label>
                    </div>
                    <div class="col-md-9">
                        <input type="text" id="devis_description" name="devis[description]" maxlength="255" class="form-control form-control-sm-2" />
                    </div>
                </div>
            </div>

            <div class="col-md-6">
                <div class="row mt-2">
                    <div class="col-md-3 text-end">
                        <label class="labels" for="devis_referent">Referent(s)</label>
                    </div>
                    <div class="col-md-9">
                        <select class="form-control tel-code" name="devis[referent][]"
                                id="devis_referent" multiple>
                                                                                        <option value="1"> BELLIFA Abd-El-Illah</option>
                                                            <option value="2"> MOENS Frédéric</option>
                                                            <option value="3"> RODRIGUES JULIEN</option>
                                                            <option value="5"> DOMINGUES Alexandre</option>
                                                            <option value="6"> AZIAKA Gildas</option>
                                                            <option value="7"> Tony De Oliveira</option>
                                                            <option value="8"> Quentin Ferreira</option>
                                                            <option value="9"> natalia semedo</option>
                                                            <option value="10"> sandrine rodrigues</option>
                                                            <option value="11"> Jean-Frédéric luce</option>
                                                            <option value="12"> ANASTACIO Angélique</option>
                                                            <option value="13"> ABOUD Amien</option>
                                                            <option value="14"> Cedric Guignou</option>
                                                            <option value="15"> David Sequeira</option>
                                                            <option value="16"> hugo genisson</option>
                                                            <option value="17"> Jeremy gaucher</option>
                                                            <option value="18"> alan Horens</option>
                                                            <option value="19"> Gokalsing Alizé</option>
                            
                        </select>
                    </div>
                </div>
            </div>

            <div class="col-md-6">
                <div class="row mt-2">
                    <div class="col-md-3 text-end labels">
                        <label class="labels required" for="devis_statut">Statut</label>
                    </div>
                    <div class="col-md-9">
                        <select id="devis_statut" name="devis[statut]" class="form-control form-control-sm-2"><option value="En cours">En cours</option><option value="Validé">Validé</option><option value="Refusé">Refusé</option></select>
                    </div>
                </div>
            </div>
        </div>
        <input type="hidden" id="devis__token" name="devis[_token]" value="7c7c142c253414d8b.ENis3_zrJ3FHcTXydqHQWJgzYQn5ProgvphCUDg_viw.PbOUjM6pckIdFWShEsSZFctGFk6QCv5rhvoFaXZR52dZqvOpr9NGJyEVDQ" /></form>

    </div>
    <div class="col-md-4 page-block m-auto" id="encadre-marge" onclick="afficherMenu()">
        <div class="row align-items-center">

            <div class="col-md-3">
                <label for="devis_debourseTotalHT">Déboursé total HT</label>
                <input type="text" id="devis_debourseTotalHT" class="form-control"
                       value=''
                       name="devis[debourseTotalHT]" disabled>
            </div>
            <div style="font-size: 1.5rem" class="col-md-1">
                X
            </div>
            <div class="col-md-3">

                <label for="devis_margeTotale">Marge totale</label>
                <input type="text" id="devis_margeTotale" class="form-control"
                       value='0'
                       name="devis[margeTotale]" disabled>
            </div>
            <div style="font-size: 1.5rem" class="col-md-1">
                =
            </div>
            <div class="col-md-4">

                <label for="devis_prixDeVenteHT">Prix de vente HT</label>
                <input type="text" id="devis_prixDeVenteHT" class="form-control"
                       value=''
                       name="devis[prixDeVenteHT]" disabled>
            </div>
        </div>

    </div>
</div>

<div id="menu-marge">
    <h3 class="ms-2">Feuille de vente du devis</h3>
    <hr>
    <div class="mt-3 ms-2">
        <p>La feuille de vente permet d'analyser le chiffrage du devis et d'ajuster certains montants. Les ajustements
            réalisés dans la feuille de vente vont impacter les montants de chaque ouvrage ou lot du devis.</p>
        <div class="col-md-11 page-block mt-2">
            <h4>Marge du devis</h4>
            <div class="row align-items-center">

                <div class="col-md-3">
                    <label for="devis_fraisGeneraux">Frais généraux</label>
                    <input type="text" id="devis_fraisGeneraux" class="form-control"
                           value=''
                           name="devis[fraisGeneraux]" disabled>
                </div>
                <div style="font-size: 1.5rem" class="col-md-1">
                    X
                </div>
                <div class="col-md-3">

                    <label for="devis_margeBeneficiaire">Marge bénéficiaire</label>
                    <input type="text" id="devis_margeBeneficiaire" class="form-control"
                           value=''
                           name="devis[margeBeneficiaire]" disabled>
                </div>
                <div style="font-size: 1.5rem" class="col-md-1">
                    =
                </div>
                <div class="col-md-4">

                    <label for="devis_margeTotalee">Marge totale</label>
                    <input type="text" id="devis_margeTotalee" class="form-control"
                           value='0'
                           name="devis[margeTotale]" disabled>
                </div>
            </div>
        </div>

        <div class="col-md-11 page-block mt-2">
            <h4>Prix de vente du devis</h4>
            <div class="row align-items-center">

                <div class="col-md-3">
                    <label for="devis_debourseTotalHTT">Déboursé total HT</label>
                    <input type="text" id="devis_debourseTotalHTT" class="form-control"
                           value=''
                           name="devis[debourseTotalHT]" disabled>
                </div>
                <div style="font-size: 1.5rem" class="col-md-1">
                    X
                </div>
                <div class="col-md-3">

                    <label for="devis_margeTotale">Marge totale</label>
                    <input type="text" id="devis_margeTotale" class="form-control"
                           value='0'
                           name="devis[margeTotale]" disabled>
                </div>
                <div style="font-size: 1.5rem" class="col-md-1">
                    =
                </div>
                <div class="col-md-4">

                    <label for="devis_prixDeVenteHT">Prix de vente HT</label>
                    <input type="text" id="devis_prixDeVenteHT" class="form-control"
                           value=''
                           name="devis[prixDeVenteHT]" disabled>
                </div>
            </div>
        </div>
    </div>
</div>



<div class="mt-4 col-md-11 m-auto">
    <div class=" css-1fnl9bt">

        <div class="css-1r30cbj">

            <div class="tab-el-left"></div>
            <div class="tab-el-left">N°</div>
            <div class="tab-el-left">Dénomination</div>
            <div class="tab-el-left">Unité</div>
            <div class="tab-el-left">Quantité</div>
            <div class="tab-el-left">Déboursé U HT</div>
            <div class="tab-el-left">Déboursé Total HT</div>
            <div class="tab-el-left">Marge</div>
            <div class="tab-el-left">Prix de vente HT</div>
            <div class="tab-el-left"></div>
            

        </div>

    </div>

    <div id="main-devis">
    <ul id="sortable-elements">
        <li>
            <div class="elements" id="element-54" type="lot" >
                <div class="css-ccobzb lot">
                    <div class="css-1r30cbj">
                        <div class="tab-el-left"></div>
                        <div class="tab-el-left">
                            <input class="chakra-input" type="text" id="devis_lots_54_code" element="lots"
                                lot="54" placeholder="N°" name="devis[lots][54][code]"
                                input="code" value=""/>
                        </div>
                        <div class="tab-el-left">
                            <input class="chakra-input" type="text" id="devis_lots_54_titre" element="lots"
                                lot="54" placeholder="Dénomination" name="devis[lots][54][titre]"
                                input="titre" value=""/>
                        </div>
                        <div class="tab-el-right">
                            
                        </div>
                        <div class="tab-el-right">
                            <input type="text" id="devis_lots_54_quantite" input="quantite"
                                name="devis[lots][54][quantite]" required="required"
                                maxlength="255" element="lots" lot="54" class="chakra-input numbers calcul"
                                    placeholder="Quantité" value="20"/>
                        </div>
                        <div class="tab-el-right">
                            <input class="chakra-input dtht-lot" type="text" id="devis_lots_54_debourseUnitaireHT"
                                    placeholder="Déboursé unitaire HT" lot="54" element="lots"
                                                            name="devis[lots][54][debourseUnitaireHT]" value="10.00"/>
                        </div>
                        <div class="tab-el-right">
                            <input class="chakra-input" type="text" id="devis_lots_54_debourseTotalHT"
                                disabled="disabled" placeholder="Déboursé Total HT" lot="54"
                                                            name="devis[lots][54][debourseTotalHT]"
                                value="200.00"
                            />
                        </div>
                        <div class="tab-el-right">
                            <input class="chakra-input dtht-lot" type="text" id="devis_lots_54_marge"
                                    placeholder="Marge" lot="54"  element="lots"
                                                            name="devis[lots][54][marge]" value="2.00"/>
                        </div>
                        <div class="tab-el-right">
                            <input class="chakra-input" type="text" id="devis_lots_54_prix_de_vente"
                                disabled="disabled" placeholder="Prix de vente" lot="54"
                                                            name="devis[lots][54][prixDeVente]"
                                value="400.00"/>
                        </div>
                        <div class="tab-el-right row justify-content-center options">
                            <div class="col-md-auto add-element-button" id="bi-plus-circle-54" type="lot" style="cursor:pointer;">
                                <span><i class="bi bi-plus-circle"></i></span>
                            </div>
                            <div class="spinner-border text-primary col-md-auto" style="display:none" role="status" id="spinner-54">
                                <span class="sr-only">Loading...</span>
                            </div>
                            <div class="col-md-auto">
                                <span><i id="menu-lot-54" class="bi bi-three-dots menu-lot"></i></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <ul>
            </ul>
        <li>
<div class='children' parent='lot-54'><li>
<div class="elements" id="element-90" type="ouvrage">

    <div class="css-1ip68u7">
        <div class="css-1r30cbj">
            <div class="tab-el-left"></div>
            <div class="tab-el-left">
                <input type="text" id="devis_ouvrages_90_code" input="code" element="ouvrages"
                       ouvrage="90" name="devis[ouvrages][90][code]" required="required"
                       maxlength="255"
                       class="chakra-input" placeholder="Code" value="Code 3">
            </div>
            <div class="tab-el-left">

                                       <input type="text" id="devis_ouvrages_90_denomination" input="denomination"
                            element="ouvrages" ouvrage="90" origine=42
                            name="devis[ouvrages][90][denomination]" required="required" maxlength="255"
                            class="chakra-input" placeholder="Dénomination" value="Ouvrage 3" disabled />
                       
            </div>
            <div class="tab-el-right">
            </div>
            <div class="tab-el-right">
                <input type="text" id="devis_ouvrages_90_quantite" input="quantite"
                       name="devis[ouvrages][90][quantite]" required="required" maxlength="255"
                       element="ouvrages" ouvrage="90" class="chakra-input numbers dtht-ouvrage"
                       placeholder="Quantité"
                       value="20"> 
            </div>
            <div class="tab-el-right">
                <input type="text" id="devis_ouvrages_90_debourseUnitaireHT" input="debourseUnitaireHT"
                       name="devis[ouvrages][90][debourseUnitaireHT]" required="required" maxlength="255"
                                                    parent-dht="54"
                                               element="ouvrages" ouvrage="90" class="chakra-input numbers dtht-ouvrage"
                       placeholder="Déboursé unitaire HT"
                       value="20.00">
            </div>
            <div class="tab-el-right">
                    <input type="text" id="devis_ouvrages_90_debourseTotalHT" disabled="disabled"
                       input="debourseTotalHT"
                       name="devis[ouvrages][90][debourseTotalHT]" required="required" maxlength="255"
                                                    parent-dtht="54"
                                               class="chakra-input" placeholder="Déboursé Total HT"
                       value="400.00">
            </div>
            <div class="tab-el-right">
                <input type="text" id="devis_ouvrages_90_marge"
                       input="marge" element="ouvrages" ouvrage="90"
                       name="devis[ouvrages][90][marge]" required="required" maxlength="255"
                                                    parent-dtht="54"
                                               class="chakra-input" placeholder="Marge"
                       value="1.00">
            </div>
            <div class="tab-el-right">
                <input type="text" id="devis_ouvrages_90_prix_de_vente" disabled="disabled"
                       input="prixDeVente"
                       name="devis[ouvrages][90][prixDeVente]" required="required" maxlength="255"
                                                    parent-dtht="54"
                                               class="chakra-input" placeholder="Prix de vente HT"
                       value="400.00">
            </div>
            <div class="tab-el-right row justify-content-center">
                <div class="col-md-auto add-element-button" id="bi-plus-circle-90" type="ouvrage"  style="cursor:pointer;">
                    <span><i ouvrage="90" class="bi bi-plus-circle"></i></span>
                </div>
                <div class="spinner-border text-primary col-md-auto" style="display:none" role="status" id="spinner-90">
                    <span class="sr-only">Loading...</span>
                </div>
                <div class="col-md-auto">
                    <span><i id="menu-ouvrage-90" class="bi bi-three-dots menu-ouvrage"></i></span>
                </div>
            </div>
        </div>
    </div>
</div>
 <ul>
 <ul>
<li><div class='children' parent='ouvrage-90'><li>
<div class="elements" id="element-97" type="composant">

    <div class="css-1ip68u77">
        <div class="css-1r30cbj">
            <div class="tab-el-left"></div>
            <div class="tab-el-left">
                <input type="text" id="devis_composants_97_code" input="code" element="composant"
                       composant="97" name="devis[composants][97][code]" required="required"
                       maxlength="255"
                       class="chakra-input" placeholder="Code" value="">
            </div>
            <div class="tab-el-left">
                <select  id="devis_composants_97_intitule" input="intitule"
                       element="composant" composant="97"
                       name="devis[composants][97][intitule]" required="required" 
                       class="chakra-input" placeholder="Dénomination" >
                        <option disabled selected> Veuillez selectionner un composant </option>

                       
                         <option value="24"> Location </option>

                       
                         <option value="25"> Montage échafaudage </option>

                       
                         <option value="26"> Démontage échafaudage </option>

                       
                         <option value="27"> Manutention </option>

                       
                         <option value="28"> Transport Aller </option>

                       
                         <option value="29"> Transport Retour </option>

                                       </select>
            </div>
            <div class="tab-el-right">
                <input type="text" id="devis_composants_97_unite" input="unite" element="composant"
                       composant="97" name="devis[composants][97][unite]" required="required"
                       maxlength="255"
                       class="chakra-input" placeholder="Unité" value="">
            </div>
            <div class="tab-el-right">
                <input type="text" id="devis_composants_97_quantite" input="quantite"
                       name="devis[composants][97][quantite]" required="required" maxlength="255"
                       element="composant" composant="97" class="chakra-input numbers dtht-composant"
                       placeholder="Quantité"
                       value="1">
            </div>
            <div class="tab-el-right">
                <input type="text" id="devis_composants_97_debourseUnitaireHT" input="debourseUnitaireHT"
                       name="devis[composants][97][debourseUnitaireHT]" required="required" maxlength="255"
                       element="composant" composant="97" class="chakra-input numbers dtht-composant"
                       placeholder="Déboursé U HT"
                       value="0.00">
            </div>
            <div class="tab-el-right">
            </div>
            <div class="tab-el-right">
                <input type="text" id="devis_composants_97_marge"
                       input="marge"
                       name="devis[composants][97][marge]" required="required" maxlength="255"
                       class="chakra-input" placeholder="Déboursé Total HT"
                       value="1.00">
            </div>
            <div class="tab-el-right">
                <input type="text" id="devis_composants_97_debourseTotalHT" disabled="disabled"
                       input="debourseTotalHT"
                       name="devis[composants][97][debourseTotalHT]" required="required" maxlength="255"
                       class="chakra-input" placeholder="Déboursé Total HT"
                       value="0.00">
            </div>
            <div class="tab-el-right row justify-content-center">

            </div>
        </div>
    </div>
</div>
<li><li>
<div class="elements" id="element-98" type="composant">

    <div class="css-1ip68u77">
        <div class="css-1r30cbj">
            <div class="tab-el-left"></div>
            <div class="tab-el-left">
                <input type="text" id="devis_composants_98_code" input="code" element="composant"
                       composant="98" name="devis[composants][98][code]" required="required"
                       maxlength="255"
                       class="chakra-input" placeholder="Code" value="">
            </div>
            <div class="tab-el-left">
                <select  id="devis_composants_98_intitule" input="intitule"
                       element="composant" composant="98"
                       name="devis[composants][98][intitule]" required="required" 
                       class="chakra-input" placeholder="Dénomination" >
                        <option disabled selected> Veuillez selectionner un composant </option>

                       
                         <option value="24"> Location </option>

                       
                         <option value="25"> Montage échafaudage </option>

                       
                         <option value="26"> Démontage échafaudage </option>

                       
                         <option value="27"> Manutention </option>

                       
                         <option value="28"> Transport Aller </option>

                       
                         <option value="29"> Transport Retour </option>

                                       </select>
            </div>
            <div class="tab-el-right">
                <input type="text" id="devis_composants_98_unite" input="unite" element="composant"
                       composant="98" name="devis[composants][98][unite]" required="required"
                       maxlength="255"
                       class="chakra-input" placeholder="Unité" value="">
            </div>
            <div class="tab-el-right">
                <input type="text" id="devis_composants_98_quantite" input="quantite"
                       name="devis[composants][98][quantite]" required="required" maxlength="255"
                       element="composant" composant="98" class="chakra-input numbers dtht-composant"
                       placeholder="Quantité"
                       value="1">
            </div>
            <div class="tab-el-right">
                <input type="text" id="devis_composants_98_debourseUnitaireHT" input="debourseUnitaireHT"
                       name="devis[composants][98][debourseUnitaireHT]" required="required" maxlength="255"
                       element="composant" composant="98" class="chakra-input numbers dtht-composant"
                       placeholder="Déboursé U HT"
                       value="0.00">
            </div>
            <div class="tab-el-right">
            </div>
            <div class="tab-el-right">
                <input type="text" id="devis_composants_98_marge"
                       input="marge"
                       name="devis[composants][98][marge]" required="required" maxlength="255"
                       class="chakra-input" placeholder="Déboursé Total HT"
                       value="1.00">
            </div>
            <div class="tab-el-right">
                <input type="text" id="devis_composants_98_debourseTotalHT" disabled="disabled"
                       input="debourseTotalHT"
                       name="devis[composants][98][debourseTotalHT]" required="required" maxlength="255"
                       class="chakra-input" placeholder="Déboursé Total HT"
                       value="0.00">
            </div>
            <div class="tab-el-right row justify-content-center">

            </div>
        </div>
    </div>
</div>
<li><li>
<div class="elements" id="element-99" type="composant">

    <div class="css-1ip68u77">
        <div class="css-1r30cbj">
            <div class="tab-el-left"></div>
            <div class="tab-el-left">
                <input type="text" id="devis_composants_99_code" input="code" element="composant"
                       composant="99" name="devis[composants][99][code]" required="required"
                       maxlength="255"
                       class="chakra-input" placeholder="Code" value="">
            </div>
            <div class="tab-el-left">
                <select  id="devis_composants_99_intitule" input="intitule"
                       element="composant" composant="99"
                       name="devis[composants][99][intitule]" required="required" 
                       class="chakra-input" placeholder="Dénomination" >
                        <option disabled selected> Veuillez selectionner un composant </option>

                       
                         <option value="24"> Location </option>

                       
                         <option value="25"> Montage échafaudage </option>

                       
                         <option value="26"> Démontage échafaudage </option>

                       
                         <option value="27"> Manutention </option>

                       
                         <option value="28"> Transport Aller </option>

                       
                         <option value="29"> Transport Retour </option>

                                       </select>
            </div>
            <div class="tab-el-right">
                <input type="text" id="devis_composants_99_unite" input="unite" element="composant"
                       composant="99" name="devis[composants][99][unite]" required="required"
                       maxlength="255"
                       class="chakra-input" placeholder="Unité" value="">
            </div>
            <div class="tab-el-right">
                <input type="text" id="devis_composants_99_quantite" input="quantite"
                       name="devis[composants][99][quantite]" required="required" maxlength="255"
                       element="composant" composant="99" class="chakra-input numbers dtht-composant"
                       placeholder="Quantité"
                       value="1">
            </div>
            <div class="tab-el-right">
                <input type="text" id="devis_composants_99_debourseUnitaireHT" input="debourseUnitaireHT"
                       name="devis[composants][99][debourseUnitaireHT]" required="required" maxlength="255"
                       element="composant" composant="99" class="chakra-input numbers dtht-composant"
                       placeholder="Déboursé U HT"
                       value="0.00">
            </div>
            <div class="tab-el-right">
            </div>
            <div class="tab-el-right">
                <input type="text" id="devis_composants_99_marge"
                       input="marge"
                       name="devis[composants][99][marge]" required="required" maxlength="255"
                       class="chakra-input" placeholder="Déboursé Total HT"
                       value="1.00">
            </div>
            <div class="tab-el-right">
                <input type="text" id="devis_composants_99_debourseTotalHT" disabled="disabled"
                       input="debourseTotalHT"
                       name="devis[composants][99][debourseTotalHT]" required="required" maxlength="255"
                       class="chakra-input" placeholder="Déboursé Total HT"
                       value="0.00">
            </div>
            <div class="tab-el-right row justify-content-center">

            </div>
        </div>
    </div>
</div>
<li><li>
<div class="elements" id="element-100" type="composant">

    <div class="css-1ip68u77">
        <div class="css-1r30cbj">
            <div class="tab-el-left"></div>
            <div class="tab-el-left">
                <input type="text" id="devis_composants_100_code" input="code" element="composant"
                       composant="100" name="devis[composants][100][code]" required="required"
                       maxlength="255"
                       class="chakra-input" placeholder="Code" value="">
            </div>
            <div class="tab-el-left">
                <select  id="devis_composants_100_intitule" input="intitule"
                       element="composant" composant="100"
                       name="devis[composants][100][intitule]" required="required" 
                       class="chakra-input" placeholder="Dénomination" >
                        <option disabled selected> Veuillez selectionner un composant </option>

                       
                         <option value="24"> Location </option>

                       
                         <option value="25"> Montage échafaudage </option>

                       
                         <option value="26"> Démontage échafaudage </option>

                       
                         <option value="27"> Manutention </option>

                       
                         <option value="28"> Transport Aller </option>

                       
                         <option value="29"> Transport Retour </option>

                                       </select>
            </div>
            <div class="tab-el-right">
                <input type="text" id="devis_composants_100_unite" input="unite" element="composant"
                       composant="100" name="devis[composants][100][unite]" required="required"
                       maxlength="255"
                       class="chakra-input" placeholder="Unité" value="">
            </div>
            <div class="tab-el-right">
                <input type="text" id="devis_composants_100_quantite" input="quantite"
                       name="devis[composants][100][quantite]" required="required" maxlength="255"
                       element="composant" composant="100" class="chakra-input numbers dtht-composant"
                       placeholder="Quantité"
                       value="1">
            </div>
            <div class="tab-el-right">
                <input type="text" id="devis_composants_100_debourseUnitaireHT" input="debourseUnitaireHT"
                       name="devis[composants][100][debourseUnitaireHT]" required="required" maxlength="255"
                       element="composant" composant="100" class="chakra-input numbers dtht-composant"
                       placeholder="Déboursé U HT"
                       value="0.00">
            </div>
            <div class="tab-el-right">
            </div>
            <div class="tab-el-right">
                <input type="text" id="devis_composants_100_marge"
                       input="marge"
                       name="devis[composants][100][marge]" required="required" maxlength="255"
                       class="chakra-input" placeholder="Déboursé Total HT"
                       value="1.00">
            </div>
            <div class="tab-el-right">
                <input type="text" id="devis_composants_100_debourseTotalHT" disabled="disabled"
                       input="debourseTotalHT"
                       name="devis[composants][100][debourseTotalHT]" required="required" maxlength="255"
                       class="chakra-input" placeholder="Déboursé Total HT"
                       value="0.00">
            </div>
            <div class="tab-el-right row justify-content-center">

            </div>
        </div>
    </div>
</div>
<li></div></div>
      </ul>
        
    </div>
</div>

<div class="row css-gg4vpm buttons">
    <div>
        <button type="button" class="css-15nl7at add-lot">
            + Créer un lot
        </button>
           </div>
</div>

<div class="mt-5">
    <button class="btn btn-primary profile-button" type="submit">Enregistrer</button>
</div>


<script>


    let selectedElement = null;
    let selectedElementId = null;
    let selectedElementType = null;

    $('body').on('click', '.add-element-button', function () {
        let id = $(this).attr('id').replaceAll('bi-plus-circle-','');
        $(this).hide();
        $('#spinner-'+id).show();
        if($(this).attr('type') ==='lot'){
             newOuvrage(id);
        }else if($(this).attr('type') ==='ouvrage'){
            let origine = $('#devis_ouvrages_'+id+'_denomination').prop("tagName").toLowerCase() === "input" ? $('#devis_ouvrages_'+id+'_denomination').attr('origine') : $('#devis_ouvrages_'+id+'_denomination').val();
            if(origine !== null){
              newComposant(id,origine);
            }else{
                $(this).show();
                $('#spinner-'+id).hide();
            }

        }else if($(this).attr('type') ==='composant'){
        }



    });
    

    function newOuvrage(id){
            $.post('/affaire/devis/ouvrage/new/'+'8'+'/'+id, function (response) {
                const data = JSON.parse(response);
               console.log(data,$('#element' + data.idParent))
                if (data.idParent != null) {
                    $("<div class='children' parent='lot-" + data.idParent + "'>" + data.html + "</div>").insertAfter($('#element-' + data.idParent));
                } else {
                    $('#main-devis').append(data.html);
                }
                $("#bi-plus-circle-"+id).show();
                $('#spinner-'+id).hide();
            })
    }

    function newComposant(id,origine){
           $.post('/affaire/devis/composant/new/'+'8'+'/'+id+'/'+origine, function (response) {
                const data = JSON.parse(response);
               console.log(data,$('#element' + data.idParent))
                if (data.idParent != null) {
                    $("<div class='children' parent='ouvrage-" + data.idParent + "'>" + data.html + "</div>").insertAfter($('#element-' + data.idParent));
                } else {
                    $('#main-devis').append(data.html);
                }
                $("#bi-plus-circle-"+id).show();
                $('#spinner-'+id).hide();

            })
    }

    $('body').on('click', '#add-lots, .add-lot', function () {
        var parentId = selectedElementId;
        var parentType = selectedElementType;
        let path = "/affaire/devis/lot/8";
        console.log(selectedElementId);
        $.post(path, {
            parentId: selectedElementId,
            parentType: selectedElementType
        }, function (data) {
            if (code = 200) {
                if (parentId != null && parentType == "lot") {
                    $("<div class='children' parent='lot-" + parentId + "'>" + JSON.parse(data).html + "</div>").insertAfter($('#element-' + parentId));
                    //console.log(parentId);
                } else {
                    $('#main-devis').append(JSON.parse(data).html);
                }
                $("#lot").modal('show');
                $('.svg').remove();
                $('.organisation').remove();
                const lotId = data.lot;
            }
        })

    })

    $('body').on('click', '#delete-lot, #delete-ouvrage', function () {
        var id = selectedElementId;

        let parentId = $('#element-' + id).parent().attr('parent') ? $('#element-' + id).parent().attr('parent').replace('lot-', '') : null;


        console.log(id);
        let path = "/affaire/devis/delete/element/8";
        $.post(path, {
            id: selectedElementId,
            type: selectedElementType
        }, function (data) {
            if (code = 200) {
                if (id != null) {
                    if ($('#element-' + id).next().hasClass('children')) {
        
                        $('#element-' + id).next().remove();
                    }
                    $('#element-' + id).remove();

                    console.log(parentId);

                    while (parentId) {
                        let sumParent = 0;
                        console.log(parentId);

                        $("[parent-dht='" + parentId + "']").each(function () {
                            let debourseOuvrage = parseFloat($('#devis_ouvrages_' + $(this).attr('ouvrage') + '_debourseTotalHT').val());
                            if (!isNaN(debourseOuvrage)) {
                                sumParent += debourseOuvrage;
                                console.log(sumParent);
                            }
                        });
                        $("[parent-dtht='" + parentId + "']").each(function () {
                            let debourseLot = parseFloat($('#devis_lots_' + $(this).attr('lot') + '_debourse').val());
                            if (!isNaN(debourseLot)) {
                                sumParent += debourseLot;
                                console.log(sumParent);
                            }
                        });
                        $("#devis_lots_" + parentId + "_debourse").val(sumParent.toFixed(2));

                        parentId = $("#devis_lots_" + parentId + "_debourse").attr('parent-dtht');
                        console.log(parentId);
                    }

                }
            }
        })

    })

    $("body").on('click', '#import-ouvrage', function () {
        $('#modal-import-ouvrage').remove();

        $.post('/affaire/bibliothequeDePrix/modal/ouvrage/liste/8', function (response) {
            const data = JSON.parse(response);
            $('body').append(data.html);
            $("#modal-import-ouvrage").modal("show");
            $('.datatable').DataTable({
                "oLanguage": {
                    sSearch: "",
                    searchPlaceholder: "Chercher"

                },
                language: {
                    searchPlaceholder: "Chercher"
                },
                order: [[0, 'desc']],
                pageLength: 25,


            });
        })
    })

    $('body').on('click', '#dupliquer-lot, #dupliquer-ouvrage', function () {
        let path = "/affaire/devis/dupliquer/element/8";
        let idParent = $(this).parent().parent().attr('parent');
        var id = selectedElementId;
        $.post(path, {
            id: selectedElementId,
            type: selectedElementType,
            idParent: idParent
        }, function (data) {
            if (code = 200) {
                console.log(data.idParent);
                if (data.idParent != null) {
                    $(JSON.parse(data).html).insertAfter('#element' + data.idParent);
                } else {
                    $('#main-devis').append(JSON.parse(data).html);
                }
                $("#lot").modal('show');
            }
        })


    })

    $('body').on('click', '.menu-lot', function () {
        let div = `<div class="context-menu">
                    <div class="item-menu" id="import-ouvrage"><i class="bi bi-reply-all-fill"></i>Importer des ouvrages</div>
                    <div class="item-menu" id="add-lots"><i class="bi bi-plus-square"></i>Créer un sous-lot</div>
                    <div class="item-menu" id="dupliquer-lot"><i class="bi bi-stickies"></i>Dupliquer</div>
                    <div class="item-menu" id="delete-lot"><i class="bi bi-trash-fill"></i>Supprimer</div>
                </div>`;
        div =  `<div class="context-menu">
                    <div class="item-menu" id="dupliquer-lot"><i class="bi bi-stickies"></i>Dupliquer</div>
                    <div class="item-menu" id="delete-lot"><i class="bi bi-trash-fill"></i>Supprimer</div>
                </div>`;
        $(this).parent().parent().parent().parent().parent().parent().append(div);
    })

    $('body').on('click', '.menu-ouvrage', function () {
        let div = `<div class="context-menu">
                    <div class="item-menu" id="dupliquer-ouvrage"><i class="bi bi-stickies"></i>Dupliquer</div>
                    <div class="item-menu" id="delete-ouvrage"><i class="bi bi-trash-fill"></i>Supprimer</div>
                </div>`;

        $(this).parent().parent().parent().parent().parent().parent().append(div);
    })

    $('body').on('click', '.composant', function () {
        let id = $(this).attr('ouvrage');
        let path = '/affaire/bibliothequeDePrix/ouvrage/composant/liste/' + id;
        if ($("#modal-liste-composant").attr('ouvrage') != id) {
            $.post(path, function (data) {
                if (code = 200) {
                    $("#modal-liste-composant").remove();
                    $('body').append(JSON.parse(data).message);
                    $("#modal-liste-composant").modal('show');
                }

            })
        } else if ($("#modal-liste-composant").attr('ouvrage') == id) {
            $("#modal-liste-composant").modal('show');
        }
    })

    $('body').on('click', '#modifier-ouvrage', function () {
        let id = selectedElementId;
        console.log(id);
        let path = '/affaire/bibliothequeDePrix/ouvrage/' + id;
        window.location.href = path;
    })

    $('body').on('click', '.elements, .menu-lot, .menu-ouvrage, .composant, .add-lot, .modifier-ouvrage', function () {
        selectedElement = $(this);
        selectedElementId = $(this).attr('id').replaceAll('element-', '');
        selectedElementType = $(this).attr('type');
    });

    function hasSomeParentTheClass(element, classname) {
        if (element.className && element.className.split(' ').indexOf(classname) >= 0) {
            return true;
        } else if (element.parentNode) {
            hasSomeParentTheClass(element.parentNode, classname)
        } else {
            return false
        }
    }

    /*$('body').click(function (event) {
        $('.selected').each(function () {
            if(!$(this).hasClass('bi-three-dots') && $(this).attr('id') && $(this).attr('id').replaceAll('menu-lot-','') != selectedElementId){
                $(this).removeClass('selected');
                selectedElement = null;
                selectedElementId = null;
                selectedElementType = null;
                $('.context-menu').remove();
        }

        });
        const selector = '.elements'
        //console.log((event.target as Element ));
        if (hasSomeParentTheClass($(this),'elements')) {
            console.log($(this))
            selectedElement = $(this);
            selectedElementId = $(this).attr('id').replaceAll('element-', '');
            selectedElementType = $(this).attr('type');
            selectedElement.addClass('selected');
        }
    });*/

    $('body').on('click', function (event) {
        if (!$(event.target).hasClass('import-ouvrage') && $(event.target).attr('id') != 'import-ouvrage' && !$(event.target).hasClass('check-ouvrage') && !$(event.target).hasClass('paginate_button'))
            $('.selected').each(function () {
                $(this).removeClass('selected');
                selectedElement = null;
                selectedElementId = null;
                selectedElementType = null;
                $('.context-menu').remove();
            });
        const selector = '.elements .' + (event.target.classList[0] ? event.target.classList[0] : "unselect");
        if (document.querySelector(selector) && selectedElement) {
            selectedElement.addClass('selected');
            selectedElement = $(this);
            selectedElementId = $(this).attr('id').replaceAll('element-', '');
            selectedElementType = $(this).attr('type');
        }
    });


    function submitImportOuvrageEvent(event) {
        var parentId = selectedElementId;
        var parentType = selectedElementType;
        event.preventDefault();
        //console.log(parentId, parentType);
        let data = {};
        $('.check-ouvrage').each(function (index) {
            if ($(this).is(':checked')) {
                console.log($(this).val());
                data[index] = {
                    parentId: selectedElementId,
                    parentType: selectedElementType,
                    id: $(this).val(),
                    order: null,
                }
            }
        })

        $.post("/affaire/devis/ouvrage/import/8", data, function (response) {
            let data = JSON.parse(response);
            if (data.code === 200) {

                $("#modal-import-ouvrage").modal("show");
                if (data.code === 200) {
                    $('#ouvrage-import-success').show();
                    setTimeout(() => {
                        $('#modal-import-ouvrage').modal('hide');
                        $('#modal-import-ouvrage').remove();

                    }, "1000");
                    if (parentId != null && parentType == "lot") {
                        $("<div class='children' parent='lot-" + parentId + "'>" + data.html + "</div>").insertAfter($('#element-' + parentId));
                        //console.log(parentId);
                        while (parentId) {
                            let sumParent = 0;

                            $("[parent-dht='" + parentId + "']").each(function () {
                                let debourseOuvrage = parseFloat($('#devis_ouvrages_' + $(this).attr('ouvrage') + '_debourseTotalHT').val());
                                if (!isNaN(debourseOuvrage)) {
                                    sumParent += debourseOuvrage;
                                    console.log(sumParent);
                                }
                            });
                            $("[parent-dtht='" + parentId + "']").each(function () {
                                let debourseLot = parseFloat($('#devis_lots_' + $(this).attr('lot') + '_debourse').val());
                                if (!isNaN(debourseLot)) {
                                    sumParent += debourseLot;
                                    console.log(sumParent);
                                }
                            });
                            $("#devis_lots_" + parentId + "_debourse").val(sumParent.toFixed(2));

                            parentId = $("#devis_lots_" + parentId + "_debourse").attr('parent-dtht');
                        }

                    } else {
                        $('#main-devis').append(data.html);
                    }
                    $('.svg').remove();
                    $('.organisation').remove();
                    $('.css-gg4vpm').show();


                } else {
                    $('#ouvrage-import-danger').show();
                    setTimeout(() => {
                        $('#modal-import-ouvrage').modal('hide');
                        $('#modal-import-ouvrage').remove();
                    }, "3000")
                }
                //    location.reload();

            }
        })
    }

    $(".import-ouvrage").click(function () {
        $('#modal-import-ouvrage').remove();

        $.post('/affaire/bibliothequeDePrix/modal/ouvrage/liste/8', function (response) {
            const data = JSON.parse(response);
            $('body').append(data.html);
            $("#modal-import-ouvrage").modal("show");
            $('.datatable').DataTable({
                "oLanguage": {
                    sSearch: "",
                    searchPlaceholder: "Chercher"

                },
                language: {
                    searchPlaceholder: "Chercher"
                },
                order: [[0, 'desc']],
                pageLength: 25,


            });
        })
    })

    $('#add-ouvrage').click(function () {
        $('#modal-ouvrage').remove();
        let path = "/affaire/bibliothequeDePrix/modal/ouvrage";
        $.post(path, function (data) {
            $('body').append(JSON.parse(data).message);
            $("#modal-ouvrage").modal('show');

        })
    })

    function sumHT(quantite, prixUnite, id, parent = null) {
        let sum = quantite * prixUnite;
        let sumParent = 0;
        $('#devis_ouvrages_' + id + '_debourseTotalHT').val(sum);
        console.log(parent)
        if (parent) {
            $("[parent-dht='" + parent + "']").each(function () {
                let quantite2 = parseInt($('#devis_ouvrages_' + $(this).attr('ouvrage') + '_quantite').val());
                let prixUnite2 = parseFloat($('#devis_ouvrages_' + $(this).attr('ouvrage') + '_debourseUnitaireHT').val().replace(',', '.'));
                sumParent += quantite2 * prixUnite2;
            })
            $("#devis_lots_" + parent + "_debourseUnitaireHT").val(sumParent)

        }

        return sum;
    }

    $('body').on("change", '.select-ouvrage', function () {
        
            let id = $(this).attr('ouvrage');
            let origine = $(this).val();

            let path = '/affaire/devis/ouvrage/origine/add/' + id+'/'+origine;

            $.post(path, function (response) {
                let data = JSON.parse(response);
                if (data.code === 200) {
               //     $('#devis_ouvrages_'+id+'_unite').val(data.data.unite);
                    $('#devis_ouvrages_'+id+'_quantite').val(data.data.quantite);
                    $('#devis_ouvrages_'+id+'_marge').val(data.data.marge);
                    $('#devis_ouvrages_'+id+'_code').val(data.data.code);

                    $('#devis_ouvrages_'+id+'_denomination').attr('disabled',true);
                }
            })
    })

    function calculDebourseTotalHT(quantite,prixUnitaireHT,id,type){
        const debourseTotalHT = (quantite * prixUnitaireHT).toFixed(2);
        $("#devis_"+type+"_"+id+"_debourseTotalHT").attr('value',debourseTotalHT)
        return debourseTotalHT;
    }
    function calculPrixDeVente(quantite,prixUnitaireHT, marge, id,type){
        const prixDeVenteHt = (quantite * prixUnitaireHT * marge).toFixed(2);
        $("#devis_"+type+"_"+id+"_prix_de_vente").attr('value',prixDeVenteHt)
        return prixDeVenteHt ;
    }
    $('body').on("change", 'input', function () {
        let type = $(this).attr('element');
        console.log(type);
        if (type === 'ouvrages') {
            let id = $(this).attr('ouvrage');
            let quantite = parseInt($('input[name="devis[ouvrages][' + id + '][quantite]"]').val());
            let prixUnite = parseFloat($('input[name="devis[ouvrages][' + id + '][debourseUnitaireHT]"]').val().replace(',', '.'));
            let marge = parseFloat($('input[name="devis[ouvrages][' + id + '][marge]"]').val().replace(',', '.'));
            const debourseTotalHT = calculDebourseTotalHT(quantite,prixUnite,id,type);
            const prixDeVenteHt = calculPrixDeVente(quantite,prixUnite,marge,id,type);
            //let sum = sumHT(quantite, prixUnite, id, $(this).attr('parent-dht') ? $(this).attr('parent-dht') : $(this).attr('parent-quantite'));

            const ouvrage = {
                code: $('input[name="devis[ouvrages][' + id + '][code]"]').val(),
                denomination: $('input[name="devis[ouvrages][' + id + '][denomination]"]').val(),
                unite: "",//$('input[name="devis[ouvrages][' + id + '][unite]"]').val(),
                quantiteDOuvrage: quantite,
                duht: prixUnite,
                dtht: debourseTotalHT,
                note: null
            }

            console.log(ouvrage);

            let path = '/affaire/bibliothequeDePrix/ouvrage/edit/' + id;

            $.post(path, {ouvrage}, function (response) {
                let data = JSON.parse(response);
                if (data.code === 200) {
                }
            })

            let parentId = $(this).attr('parent-dht') ? $(this).attr('parent-dht') : $(this).attr('parent-quantite');
            /*while (parentId) {
                let sumParent = 0;
                console.log(parentId);

                $("[parent-dht='" + parentId + "']").each(function () {
                    let debourseOuvrage = $('#devis_ouvrages_' + $(this).attr('ouvrage') + '_debourseTotalHT').val().replace(',', '.');
                    debourseOuvrage = isNaN(debourseOuvrage) ? 0 : parseFloat(debourseOuvrage);
                    sumParent += debourseOuvrage;
                    //console.log(sumParent);
                });
                $("[parent-dtht='" + parentId + "']").each(function () {
                    let debourseLot = $('#devis_lots_' + $(this).attr('lot') + '_debourseUnitaireHT').val();
                    debourseLot = isNaN(debourseLot) ? 0 : parseFloat(debourseLot);
                    sumParent += debourseLot;
                    //console.log(sumParent);
                });

                console.log(parentId);
                $("#devis_lots_" + parentId + "_debourseUnitaireHT").val(sumParent.toFixed(2));

                const lot = {
                    code: $('input[name="devis[lots][' + parentId + '][code]"]').val(),
                    titre: $('input[name="devis[lots][' + parentId + '][titre]"]').val(),
                    quantite: parseInt($('input[name="devis[lots][' + parentId + '][quantite]"]').val()),
                    prix: sumParent
                };
                let path2 = '/affaire/devis/edit/lot/' + parentId;

                parentId = $("#devis_lots_" + parentId + "_debourseUnitaireHT").attr('parent-dtht');
                console.log(lot);

                $.post(path2, {lot}, function (response) {
                    let data = JSON.parse(response);
                    if (data.code === 200) {
                        //           console.log(data, lot);
                    }
                })

            }*/
        }


        if (type == "lots") {
            let id = $(this).attr('lot');
       
            /*$("[parent-quantite='" + id + "']").each(function () {
                let idOuvrage = $(this).attr('ouvrage');
                let quantite = parseInt($('input[name="devis[lots][' + id + '][quantite]"]').val());
                $('input[name="devis[ouvrages][' + idOuvrage + '][quantite]"]').val(quantite);
                let prixUnite = parseFloat($('input[name="devis[ouvrages][' + idOuvrage + '][debourseUnitaireHT]"]').val().replace(',', '.'));
                let sum = sumHT(quantite, prixUnite, idOuvrage, $(this).attr('parent-dht') ? $(this).attr('parent-dht') : $(this).attr('parent-quantite'));

                const ouvrage = {
                    code: $('input[name="devis[ouvrages][' + idOuvrage + '][code]"]').val(),
                    denomination: $('input[name="devis[ouvrages][' + idOuvrage + '][denomination]"]').val(),
                    unite: $('input[name="devis[ouvrages][' + idOuvrage + '][unite]"]').val(),
                    quantiteDOuvrage: quantite,
                    duht: prixUnite,
                    dtht: sum,
                    note: null
                }
                //  console.log(ouvrage);

                let path = '/affaire/bibliothequeDePrix/ouvrage/edit/' + idOuvrage;

                $.post(path, {ouvrage}, function (response) {
                    let data = JSON.parse(response);
                    if (data.code === 200) {
                    }
                })
            });*/

            let quantite = parseFloat($('input[name="devis[lots][' + id + '][quantite]"]').val());
            let prixUnite = parseFloat($('input[name="devis[lots][' + id + '][debourseUnitaireHT]"]').val());
            let marge = parseFloat($('input[name="devis[lots][' + id + '][marge]"]').val().replace(',', '.'));
            const debourseTotalHT = calculDebourseTotalHT(quantite,prixUnite,id,type);
            const prixDeVenteHt = calculPrixDeVente(quantite,prixUnite,marge,id,type);

            console.log(quantite,prixUnite,marge,id)

            const lot = {
                code: $('input[name="devis[lots][' + id + '][code]"]').val(),
                titre: $('input[name="devis[lots][' + id + '][titre]"]').val(),
                quantite: quantite,
                prix: prixUnite,
                marge:marge
            };


            let path = '/affaire/devis/edit/lot/' + id;

            $.post(path, {lot}, function (response) {
                let data = JSON.parse(response);
                if (data.code === 200) {
                    //           console.log(data, lot);
                }
            })

            let parentId = $(this).attr('parent-quantite');
            while (parentId) {
                let sumQuantiteParent = 0;
                let sumPrixParent = 0;
                console.log(parentId);

                $("[parent-quantite='" + parentId + "']").each(function () {
                    let quantite = ($('#devis_ouvrages_' + $(this).attr('ouvrage') + '_quantite').val()) ? $('#devis_ouvrages_' + $(this).attr('ouvrage') + '_quantite').val() : $('#devis_lots_' + $(this).attr('lot') + '_quantite').val();
                    quantite = isNaN(quantite) ? 0 : parseInt(quantite);
                    sumQuantiteParent += quantite;
                    //console.log(sumParent);
                    let prix = ($('#devis_ouvrages_' + $(this).attr('ouvrage') + '_debourseTotalHT').val()) ? $('#devis_ouvrages_' + $(this).attr('ouvrage') + '_debourseTotalHT').val() : $('#devis_lots_' + $(this).attr('lot') + '_debourseUnitaireHT').val();
                    prix = isNaN(prix) ? 0 : parseFloat(prix);
                    sumPrixParent += prix;
                });

                //console.log(parentId);
                $("#devis_lots_" + parentId + "_quantite").val(sumQuantiteParent);
                $("#devis_lots_" + parentId + "_debourseUnitaireHT").val(sumPrixParent.toFixed(2));

                const lot = {
                    code: $('input[name="devis[lots][' + parentId + '][code]"]').val(),
                    titre: $('input[name="devis[lots][' + parentId + '][titre]"]').val(),
                    quantite: sumQuantiteParent,
                    prix: sumPrixParent,
                };
                let path2 = '/affaire/devis/edit/lot/' + parentId;

                parentId = $("#devis_lots_" + parentId + "_debourseUnitaireHT").attr('parent-dtht');
                console.log(lot);

                $.post(path2, {lot}, function (response) {
                    let data = JSON.parse(response);
                    if (data.code === 200) {
                        //           console.log(data, lot);
                    }
                })

            }
        }
    })

    $('.numbers').keyup(function () {
        this.value = this.value.replace(/[^0-9\.\,]/g, '');
    });

    function afficherMenu() {
        $('#menu-marge').css('display', 'block');
    }

    $(document).on('click', function(e) {
        if(!$(e.target).closest('#menu-marge').length) {
            $('#menu-marge').css('display', 'none');
        }
    });

    $('#encadre-marge').on('click', function(e) {
        e.stopPropagation();
        afficherMenu();
    });



</script>



    <a href="/affaire/devis/">back to list</a>

            </div>

        </div>
    </div>
</div>


<div id="sfwdtaeaf2c" class="sf-toolbar sf-display-none" role="region" aria-label="Symfony Web Debug Toolbar">    <!-- START of Symfony Web Debug Toolbar --><div id="sfMiniToolbar-aeaf2c" class="sf-minitoolbar" data-no-turbolink>    <button type="button" title="Show Symfony toolbar" id="sfToolbarMiniToggler-aeaf2c" accesskey="D" aria-expanded="false" aria-controls="sfToolbarMainContent-aeaf2c">        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="#AAA" d="M12 .9C5.8.9.9 5.8.9 12a11 11 0 1 0 22.2 0A11 11 0 0 0 12 .9zm6.5 6c-.6 0-.9-.3-.9-.8 0-.2 0-.4.2-.6l.2-.4c0-.3-.5-.4-.6-.4-1.8.1-2.3 2.5-2.7 4.4l-.2 1c1 .2 1.8 0 2.2-.3.6-.4-.2-.7-.1-1.2.1-.3.5-.5.7-.6.5 0 .7.5.7.9 0 .7-1 1.8-3 1.8l-.6-.1-.6 2.4c-.4 1.6-.8 3.8-2.4 5.7-1.4 1.7-2.9 1.9-3.5 1.9-1.2 0-1.9-.6-2-1.5 0-.8.7-1.3 1.2-1.3.6 0 1.1.5 1.1 1s-.2.6-.4.6c-.1.1-.3.2-.3.4 0 .1.1.3.4.3.5 0 .8-.3 1.1-.5 1.2-.9 1.6-2.7 2.2-5.7l.1-.7.7-3.2c-.8-.6-1.3-1.4-2.4-1.7-.6-.1-1.1.1-1.5.5-.4.5-.2 1.1.2 1.5l.7.6c.7.8 1.2 1.6 1 2.5-.3 1.5-2 2.6-4 1.9-1.8-.6-2-1.8-1.8-2.5.2-.6.6-.7 1.1-.6.5.2.6.7.6 1.2l-.1.3c-.2.1-.3.3-.3.4-.1.4.4.6.7.7.7.3 1.6-.2 1.8-.8a1 1 0 0 0-.4-1.1l-.7-.8c-.4-.4-1.1-1.4-.7-2.6.1-.5.4-.9.7-1.3a4 4 0 0 1 2.8-.6c1.2.4 1.8 1.1 2.6 1.8.5-1.2 1-2.4 1.8-3.5.9-.9 1.9-1.6 3.1-1.7 1.3.2 2.2.7 2.2 1.6 0 .4-.2 1.1-.9 1.1z"/></svg>    </button></div><div id="sfToolbarClearer-aeaf2c" class="sf-toolbar-clearer"></div><div id="sfToolbarMainContent-aeaf2c" class="sf-toolbarreset clear-fix" data-no-turbolink>                                                    <div class="sf-toolbar-block sf-toolbar-block-request sf-toolbar-status-normal " >    <a href="https://127.0.0.1:8000/_profiler/aeaf2c?panel=request">        <div class="sf-toolbar-icon">        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="#AAA" d="M12 .9C5.8.9.9 5.8.9 12a11 11 0 1 0 22.2 0A11 11 0 0 0 12 .9zm6.5 6c-.6 0-.9-.3-.9-.8 0-.2 0-.4.2-.6l.2-.4c0-.3-.5-.4-.6-.4-1.8.1-2.3 2.5-2.7 4.4l-.2 1c1 .2 1.8 0 2.2-.3.6-.4-.2-.7-.1-1.2.1-.3.5-.5.7-.6.5 0 .7.5.7.9 0 .7-1 1.8-3 1.8l-.6-.1-.6 2.4c-.4 1.6-.8 3.8-2.4 5.7-1.4 1.7-2.9 1.9-3.5 1.9-1.2 0-1.9-.6-2-1.5 0-.8.7-1.3 1.2-1.3.6 0 1.1.5 1.1 1s-.2.6-.4.6c-.1.1-.3.2-.3.4 0 .1.1.3.4.3.5 0 .8-.3 1.1-.5 1.2-.9 1.6-2.7 2.2-5.7l.1-.7.7-3.2c-.8-.6-1.3-1.4-2.4-1.7-.6-.1-1.1.1-1.5.5-.4.5-.2 1.1.2 1.5l.7.6c.7.8 1.2 1.6 1 2.5-.3 1.5-2 2.6-4 1.9-1.8-.6-2-1.8-1.8-2.5.2-.6.6-.7 1.1-.6.5.2.6.7.6 1.2l-.1.3c-.2.1-.3.3-.3.4-.1.4.4.6.7.7.7.3 1.6-.2 1.8-.8a1 1 0 0 0-.4-1.1l-.7-.8c-.4-.4-1.1-1.4-.7-2.6.1-.5.4-.9.7-1.3a4 4 0 0 1 2.8-.6c1.2.4 1.8 1.1 2.6 1.8.5-1.2 1-2.4 1.8-3.5.9-.9 1.9-1.6 3.1-1.7 1.3.2 2.2.7 2.2 1.6 0 .4-.2 1.1-.9 1.1z"/></svg>        <span class="sf-toolbar-value sf-toolbar-ajax-request-counter">            Loading&hellip;        </span>    </div>    </a>        <div class="sf-toolbar-info">        <div class="sf-toolbar-info-piece">            <b>Loading the web debug toolbar&hellip;</b>        </div>        <div class="sf-toolbar-info-piece">            Attempt #<span id="sfLoadCounter-aeaf2c"></span>        </div>        <div class="sf-toolbar-info-piece">            <b>                <button class="sf-cancel-button" type="button" id="sfLoadCancel-aeaf2c" title="Cancel loading">Cancel</button>            </b>        </div>    </div></div>                                <button class="hide-button" type="button" id="sfToolbarHideButton-aeaf2c" title="Close Toolbar" accesskey="D" aria-expanded="true" aria-controls="sfToolbarMainContent-aeaf2c">        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="#AAA" d="M21.1 18.3c.8.8.8 2 0 2.8-.4.4-.9.6-1.4.6s-1-.2-1.4-.6L12 14.8l-6.3 6.3c-.4.4-.9.6-1.4.6s-1-.2-1.4-.6a2 2 0 0 1 0-2.8L9.2 12 2.9 5.7a2 2 0 0 1 0-2.8 2 2 0 0 1 2.8 0L12 9.2l6.3-6.3a2 2 0 0 1 2.8 0c.8.8.8 2 0 2.8L14.8 12l6.3 6.3z"/></svg>    </button></div><!-- END of Symfony Web Debug Toolbar --></div><script nonce="987e6fb58d270851adc63ca78dcb0599">/*<![CDATA[*/    if (typeof Sfjs === 'undefined' || typeof Sfjs.loadToolbar === 'undefined') {    Sfjs = (function() {        "use strict";        if ('classList' in document.documentElement) {            var hasClass = function (el, cssClass) { return el.classList.contains(cssClass); };            var removeClass = function(el, cssClass) { el.classList.remove(cssClass); };            var addClass = function(el, cssClass) { el.classList.add(cssClass); };            var toggleClass = function(el, cssClass) { el.classList.toggle(cssClass); };        } else {            var hasClass = function (el, cssClass) { return el.className.match(new RegExp('\\b' + cssClass + '\\b')); };            var removeClass = function(el, cssClass) { el.className = el.className.replace(new RegExp('\\b' + cssClass + '\\b'), ' '); };            var addClass = function(el, cssClass) { if (!hasClass(el, cssClass)) { el.className += " " + cssClass; } };            var toggleClass = function(el, cssClass) { hasClass(el, cssClass) ? removeClass(el, cssClass) : addClass(el, cssClass); };        }        var noop = function() {};        var profilerStorageKey = 'symfony/profiler/';        var addEventListener;        var el = document.createElement('div');        if (!('addEventListener' in el)) {            addEventListener = function (element, eventName, callback) {                element.attachEvent('on' + eventName, callback);            };        } else {            addEventListener = function (element, eventName, callback) {                element.addEventListener(eventName, callback, false);            };        }        if (navigator.clipboard) {            document.querySelectorAll('[data-clipboard-text]').forEach(function(element) {                removeClass(element, 'hidden');                element.addEventListener('click', function() {                    navigator.clipboard.writeText(element.getAttribute('data-clipboard-text'));                })            });        }        var request = function(url, onSuccess, onError, payload, options, tries) {            var xhr = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject('Microsoft.XMLHTTP');            options = options || {};            options.retry = options.retry || false;            tries = tries || 1;            /* this delays for 125, 375, 625, 875, and 1000, ... */            var delay = tries < 5 ? (tries - 0.5) * 250 : 1000;            xhr.open(options.method || 'GET', url, true);            xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');            xhr.onreadystatechange = function(state) {                if (4 !== xhr.readyState) {                    return null;                }                if (xhr.status == 404 && options.retry && !options.stop) {                    setTimeout(function() {                        if (options.stop) {                            return;                        }                        request(url, onSuccess, onError, payload, options, tries + 1);                    }, delay);                    return null;                }                if (200 === xhr.status) {                    (onSuccess || noop)(xhr);                } else {                    (onError || noop)(xhr);                }            };            if (options.onSend) {                options.onSend(tries);            }            xhr.send(payload || '');        };        var getPreference = function(name) {            if (!window.localStorage) {                return null;            }            return localStorage.getItem(profilerStorageKey + name);        };        var setPreference = function(name, value) {            if (!window.localStorage) {                return null;            }            localStorage.setItem(profilerStorageKey + name, value);        };        var requestStack = [];        var extractHeaders = function(xhr, stackElement) {            /* Here we avoid to call xhr.getResponseHeader in order to */            /* prevent polluting the console with CORS security errors */            var allHeaders = xhr.getAllResponseHeaders();            var ret;            if (ret = allHeaders.match(/^x-debug-token:\s+(.*)$/im)) {                stackElement.profile = ret[1];            }            if (ret = allHeaders.match(/^x-debug-token-link:\s+(.*)$/im)) {                stackElement.profilerUrl = ret[1];            }            if (ret = allHeaders.match(/^Symfony-Debug-Toolbar-Replace:\s+(.*)$/im)) {                stackElement.toolbarReplaceFinished = false;                stackElement.toolbarReplace = '1' === ret[1];            }        };        var successStreak = 4;        var pendingRequests = 0;        var renderAjaxRequests = function() {            var requestCounter = document.querySelector('.sf-toolbar-ajax-request-counter');            if (!requestCounter) {                return;            }            requestCounter.textContent = requestStack.length;            var infoSpan = document.querySelector(".sf-toolbar-ajax-info");            if (infoSpan) {                infoSpan.textContent = requestStack.length + ' AJAX request' + (requestStack.length !== 1 ? 's' : '');            }            var ajaxToolbarPanel = document.querySelector('.sf-toolbar-block-ajax');            if (requestStack.length) {                ajaxToolbarPanel.style.display = 'block';            } else {                ajaxToolbarPanel.style.display = 'none';            }            if (pendingRequests > 0) {                addClass(ajaxToolbarPanel, 'sf-ajax-request-loading');            } else if (successStreak < 4) {                addClass(ajaxToolbarPanel, 'sf-toolbar-status-red');                removeClass(ajaxToolbarPanel, 'sf-ajax-request-loading');            } else {                removeClass(ajaxToolbarPanel, 'sf-ajax-request-loading');                removeClass(ajaxToolbarPanel, 'sf-toolbar-status-red');            }        };        var startAjaxRequest = function(index) {            var tbody = document.querySelector('.sf-toolbar-ajax-request-list');            if (!tbody) {                return;            }            var nbOfAjaxRequest = tbody.rows.length;            if (nbOfAjaxRequest >= 100) {                tbody.deleteRow(0);            }            var request = requestStack[index];            pendingRequests++;            var row = document.createElement('tr');            request.DOMNode = row;            var requestNumberCell = document.createElement('td');            requestNumberCell.textContent = index + 1;            row.appendChild(requestNumberCell);            var profilerCell = document.createElement('td');            profilerCell.textContent = 'n/a';            row.appendChild(profilerCell);            var methodCell = document.createElement('td');            methodCell.textContent = request.method;            row.appendChild(methodCell);            var typeCell = document.createElement('td');            typeCell.textContent = request.type;            row.appendChild(typeCell);            var statusCodeCell = document.createElement('td');            var statusCode = document.createElement('span');            statusCode.textContent = 'n/a';            statusCodeCell.appendChild(statusCode);            row.appendChild(statusCodeCell);            var pathCell = document.createElement('td');            pathCell.className = 'sf-ajax-request-url';            if ('GET' === request.method) {                var pathLink = document.createElement('a');                pathLink.setAttribute('href', request.url);                pathLink.textContent = request.url;                pathCell.appendChild(pathLink);            } else {                pathCell.textContent = request.url;            }            pathCell.setAttribute('title', request.url);            row.appendChild(pathCell);            var durationCell = document.createElement('td');            durationCell.className = 'sf-ajax-request-duration';            durationCell.textContent = 'n/a';            row.appendChild(durationCell);            request.liveDurationHandle = setInterval(function() {                durationCell.textContent = (new Date() - request.start) + ' ms';            }, 100);            row.className = 'sf-ajax-request sf-ajax-request-loading';            tbody.insertBefore(row, null);            var toolbarInfo = document.querySelector('.sf-toolbar-block-ajax .sf-toolbar-info');            toolbarInfo.scrollTop = toolbarInfo.scrollHeight;            renderAjaxRequests();        };        var finishAjaxRequest = function(index) {            var request = requestStack[index];            clearInterval(request.liveDurationHandle);            if (!request.DOMNode) {                return;            }            if (request.toolbarReplace && !request.toolbarReplaceFinished && request.profile) {                /* Flag as complete because finishAjaxRequest can be called multiple times. */                request.toolbarReplaceFinished = true;                /* Search up through the DOM to find the toolbar's container ID. */                for (var elem = request.DOMNode; elem && elem !== document; elem = elem.parentNode) {                    if (elem.id.match(/^sfwdt/)) {                        Sfjs.loadToolbar(elem.id.replace(/^sfwdt/, ''), request.profile);                        break;                    }                }            }            pendingRequests--;            var row = request.DOMNode;            /* Unpack the children from the row */            var profilerCell = row.children[1];            var methodCell = row.children[2];            var statusCodeCell = row.children[4];            var statusCodeElem = statusCodeCell.children[0];            var durationCell = row.children[6];            if (request.error) {                row.className = 'sf-ajax-request sf-ajax-request-error';                methodCell.className = 'sf-ajax-request-error';                successStreak = 0;            } else {                row.className = 'sf-ajax-request sf-ajax-request-ok';                successStreak++;            }            if (request.statusCode) {                if (request.statusCode < 300) {                    statusCodeElem.setAttribute('class', 'sf-toolbar-status');                } else if (request.statusCode < 400) {                    statusCodeElem.setAttribute('class', 'sf-toolbar-status sf-toolbar-status-yellow');                } else {                    statusCodeElem.setAttribute('class', 'sf-toolbar-status sf-toolbar-status-red');                }                statusCodeElem.textContent = request.statusCode;            } else {                statusCodeElem.setAttribute('class', 'sf-toolbar-status sf-toolbar-status-red');            }            if (request.duration) {                durationCell.textContent = request.duration + ' ms';            }            if (request.profilerUrl) {                profilerCell.textContent = '';                var profilerLink = document.createElement('a');                profilerLink.setAttribute('href', request.profilerUrl);                profilerLink.textContent = request.profile;                profilerCell.appendChild(profilerLink);            }            renderAjaxRequests();        };                    if (window.fetch && window.fetch.polyfill === undefined) {                var oldFetch = window.fetch;                window.fetch = function () {                    var promise = oldFetch.apply(this, arguments);                    var url = arguments[0];                    var params = arguments[1];                    var paramType = Object.prototype.toString.call(arguments[0]);                    if (paramType === '[object Request]') {                        url = arguments[0].url;                        params = {                            method: arguments[0].method,                            credentials: arguments[0].credentials,                            headers: arguments[0].headers,                            mode: arguments[0].mode,                            redirect: arguments[0].redirect                        };                    } else {                        url = String(url);                    }                    if (!url.match(new RegExp("^\/((index|app(_[\\w]+)?)\\.php\/)?_wdt"))) {                        var method = 'GET';                        if (params && params.method !== undefined) {                            method = params.method;                        }                        var stackElement = {                            error: false,                            url: url,                            method: method,                            type: 'fetch',                            start: new Date()                        };                        var idx = requestStack.push(stackElement) - 1;                        promise.then(function (r) {                            stackElement.duration = new Date() - stackElement.start;                            stackElement.error = r.status < 200 || r.status >= 400;                            stackElement.statusCode = r.status;                            stackElement.profile = r.headers.get('x-debug-token');                            stackElement.profilerUrl = r.headers.get('x-debug-token-link');                            stackElement.toolbarReplaceFinished = false;                            stackElement.toolbarReplace = '1' === r.headers.get('Symfony-Debug-Toolbar-Replace');                            finishAjaxRequest(idx);                        }, function (e){                            stackElement.error = true;                            finishAjaxRequest(idx);                        });                        startAjaxRequest(idx);                    }                    return promise;                };            }            if (window.XMLHttpRequest && XMLHttpRequest.prototype.addEventListener) {                var proxied = XMLHttpRequest.prototype.open;                XMLHttpRequest.prototype.open = function(method, url, async, user, pass) {                    var self = this;                    /* prevent logging AJAX calls to static and inline files, like templates */                    var path = url;                    if (url.slice(0, 1) === '/') {                        if (0 === url.indexOf('')) {                            path = url.slice(0);                        }                    }                    else if (0 === url.indexOf('https\u003A\/\/127.0.0.1\u003A8000')) {                        path = url.slice(22);                    }                    if (!path.match(new RegExp("^\/((index|app(_[\\w]+)?)\\.php\/)?_wdt"))) {                        var stackElement = {                            error: false,                            url: url,                            method: method,                            type: 'xhr',                            start: new Date()                        };                        var idx = requestStack.push(stackElement) - 1;                        this.addEventListener('readystatechange', function() {                            if (self.readyState == 4) {                                stackElement.duration = new Date() - stackElement.start;                                stackElement.error = self.status < 200 || self.status >= 400;                                stackElement.statusCode = self.status;                                extractHeaders(self, stackElement);                                finishAjaxRequest(idx);                            }                        }, false);                        startAjaxRequest(idx);                    }                    proxied.apply(this, Array.prototype.slice.call(arguments));                };            }                return {            hasClass: hasClass,            removeClass: removeClass,            addClass: addClass,            toggleClass: toggleClass,            getPreference: getPreference,            setPreference: setPreference,            addEventListener: addEventListener,            request: request,            renderAjaxRequests: renderAjaxRequests,            getSfwdt: function(token) {                if (!this.sfwdt) {                    this.sfwdt = document.getElementById('sfwdt' + token);                }                return this.sfwdt;            },            load: function(selector, url, onSuccess, onError, options) {                var el = document.getElementById(selector);                if (el && el.getAttribute('data-sfurl') !== url) {                    request(                        url,                        function(xhr) {                            el.innerHTML = xhr.responseText;                            el.setAttribute('data-sfurl', url);                            removeClass(el, 'loading');                            var pending = pendingRequests;                            for (var i = 0; i < requestStack.length; i++) {                                startAjaxRequest(i);                                if (requestStack[i].duration) {                                    finishAjaxRequest(i);                                }                            }                            /* Revert the pending state in case there was a start called without a finish above. */                            pendingRequests = pending;                            (onSuccess || noop)(xhr, el);                        },                        function(xhr) { (onError || noop)(xhr, el); },                        '',                        options                    );                }                return this;            },            showToolbar: function(token) {                var sfwdt = this.getSfwdt(token);                removeClass(sfwdt, 'sf-display-none');                if (getPreference('toolbar/displayState') == 'none') {                    document.getElementById('sfToolbarMainContent-' + token).style.display = 'none';                    document.getElementById('sfToolbarClearer-' + token).style.display = 'none';                    document.getElementById('sfMiniToolbar-' + token).style.display = 'block';                } else {                    document.getElementById('sfToolbarMainContent-' + token).style.display = 'block';                    document.getElementById('sfToolbarClearer-' + token).style.display = 'block';                    document.getElementById('sfMiniToolbar-' + token).style.display = 'none';                }            },            hideToolbar: function(token) {                var sfwdt = this.getSfwdt(token);                addClass(sfwdt, 'sf-display-none');            },            initToolbar: function(token) {                this.showToolbar(token);                var hideButton = document.getElementById('sfToolbarHideButton-' + token);                var hideButtonSvg = hideButton.querySelector('svg');                hideButtonSvg.setAttribute('aria-hidden', 'true');                hideButtonSvg.setAttribute('focusable', 'false');                addEventListener(hideButton, 'click', function (event) {                    event.preventDefault();                    var p = this.parentNode;                    p.style.display = 'none';                    (p.previousElementSibling || p.previousSibling).style.display = 'none';                    document.getElementById('sfMiniToolbar-' + token).style.display = 'block';                    setPreference('toolbar/displayState', 'none');                });                var showButton = document.getElementById('sfToolbarMiniToggler-' + token);                var showButtonSvg = showButton.querySelector('svg');                showButtonSvg.setAttribute('aria-hidden', 'true');                showButtonSvg.setAttribute('focusable', 'false');                addEventListener(showButton, 'click', function (event) {                    event.preventDefault();                    var elem = this.parentNode;                    if (elem.style.display == 'none') {                        document.getElementById('sfToolbarMainContent-' + token).style.display = 'none';                        document.getElementById('sfToolbarClearer-' + token).style.display = 'none';                        elem.style.display = 'block';                    } else {                        document.getElementById('sfToolbarMainContent-' + token).style.display = 'block';                        document.getElementById('sfToolbarClearer-' + token).style.display = 'block';                        elem.style.display = 'none'                    }                    setPreference('toolbar/displayState', 'block');                });            },            loadToolbar: function(token, newToken) {                var that = this;                var triesCounter = document.getElementById('sfLoadCounter-' + token);                var options = {                    retry: true,                    onSend: function (count) {                        if (count === 3) {                            that.initToolbar(token);                        }                        if (triesCounter) {                            triesCounter.textContent = count;                        }                    },                };                var cancelButton = document.getElementById('sfLoadCancel-' + token);                if (cancelButton) {                    addEventListener(cancelButton, 'click', function (event) {                        event.preventDefault();                        options.stop = true;                        that.hideToolbar(token);                    });                }                newToken = (newToken || token);                this.load(                    'sfwdt' + token,                    'https\u003A\/\/127.0.0.1\u003A8000\/_wdt\/xxxxxx'.replace(/xxxxxx/, newToken),                    function(xhr, el) {                        /* Do nothing in the edge case where the toolbar has already been replaced with a new one */                        if (!document.getElementById('sfToolbarMainContent-' + newToken)) {                            return;                        }                        /* Evaluate in global scope scripts embedded inside the toolbar */                        var i, scripts = [].slice.call(el.querySelectorAll('script'));                        for (i = 0; i < scripts.length; ++i) {                            eval.call({}, scripts[i].firstChild.nodeValue);                        }                        el.style.display = -1 !== xhr.responseText.indexOf('sf-toolbarreset') ? 'block' : 'none';                        if (el.style.display == 'none') {                            return;                        }                        that.initToolbar(newToken);                        /* Handle toolbar-info position */                        var toolbarBlocks = [].slice.call(el.querySelectorAll('.sf-toolbar-block'));                        for (i = 0; i < toolbarBlocks.length; ++i) {                            toolbarBlocks[i].onmouseover = function () {                                var toolbarInfo = this.querySelectorAll('.sf-toolbar-info')[0];                                var pageWidth = document.body.clientWidth;                                var elementWidth = toolbarInfo.offsetWidth;                                var leftValue = (elementWidth + this.offsetLeft) - pageWidth;                                var rightValue = (elementWidth + (pageWidth - this.offsetLeft)) - pageWidth;                                /* Reset right and left value, useful on window resize */                                toolbarInfo.style.right = '';                                toolbarInfo.style.left = '';                                if (elementWidth > pageWidth) {                                    toolbarInfo.style.left = 0;                                }                                else if (leftValue > 0 && rightValue > 0) {                                    toolbarInfo.style.right = (rightValue * -1) + 'px';                                } else if (leftValue < 0) {                                    toolbarInfo.style.left = 0;                                } else {                                    toolbarInfo.style.right = '0px';                                }                            };                        }                        renderAjaxRequests();                        addEventListener(document.querySelector('.sf-toolbar-ajax-clear'), 'click', function() {                            requestStack = [];                            renderAjaxRequests();                            successStreak = 4;                            document.querySelector('.sf-toolbar-ajax-request-list').innerHTML = '';                        });                        addEventListener(document.querySelector('.sf-toolbar-block-ajax'), 'mouseenter', function (event) {                            var elem = document.querySelector('.sf-toolbar-block-ajax .sf-toolbar-info');                            elem.scrollTop = elem.scrollHeight;                        });                        addEventListener(document.querySelector('.sf-toolbar-block-ajax > .sf-toolbar-icon'), 'click', function (event) {                            event.preventDefault();                            toggleClass(this.parentNode, 'hover');                        });                        var dumpInfo = document.querySelector('.sf-toolbar-block-dump .sf-toolbar-info');                        if (null !== dumpInfo) {                            addEventListener(dumpInfo, 'sfbeforedumpcollapse', function () {                                dumpInfo.style.minHeight = dumpInfo.getBoundingClientRect().height+'px';                            });                            addEventListener(dumpInfo, 'mouseleave', function () {                                dumpInfo.style.minHeight = '';                            });                        }                    },                    function(xhr) {                        if (xhr.status !== 0 && !options.stop) {                            var sfwdt = that.getSfwdt(token);                            sfwdt.innerHTML = '\                                <div class="sf-toolbarreset">\                                    <div class="sf-toolbar-icon"><svg width="26" height="28" xmlns="http://www.w3.org/2000/svg" version="1.1" x="0px" y="0px" viewBox="0 0 26 28" enable-background="new 0 0 26 28" xml:space="preserve"><path fill="#FFFFFF" d="M13 0C5.8 0 0 5.8 0 13c0 7.2 5.8 13 13 13c7.2 0 13-5.8 13-13C26 5.8 20.2 0 13 0z M20 7.5 c-0.6 0-1-0.3-1-0.9c0-0.2 0-0.4 0.2-0.6c0.1-0.3 0.2-0.3 0.2-0.4c0-0.3-0.5-0.4-0.7-0.4c-2 0.1-2.5 2.7-2.9 4.8l-0.2 1.1 c1.1 0.2 1.9 0 2.4-0.3c0.6-0.4-0.2-0.8-0.1-1.3C18 9.2 18.4 9 18.7 8.9c0.5 0 0.8 0.5 0.8 1c0 0.8-1.1 2-3.3 1.9 c-0.3 0-0.5 0-0.7-0.1L15 14.1c-0.4 1.7-0.9 4.1-2.6 6.2c-1.5 1.8-3.1 2.1-3.8 2.1c-1.3 0-2.1-0.6-2.2-1.6c0-0.9 0.8-1.4 1.3-1.4 c0.7 0 1.2 0.5 1.2 1.1c0 0.5-0.2 0.6-0.4 0.7c-0.1 0.1-0.3 0.2-0.3 0.4c0 0.1 0.1 0.3 0.4 0.3c0.5 0 0.9-0.3 1.2-0.5 c1.3-1 1.7-2.9 2.4-6.2l0.1-0.8c0.2-1.1 0.5-2.3 0.8-3.5c-0.9-0.7-1.4-1.5-2.6-1.8c-0.8-0.2-1.3 0-1.7 0.4C8.4 10 8.6 10.7 9 11.1 l0.7 0.7c0.8 0.9 1.3 1.7 1.1 2.7c-0.3 1.6-2.1 2.8-4.3 2.1c-1.9-0.6-2.2-1.9-2-2.7c0.2-0.6 0.7-0.8 1.2-0.6 c0.5 0.2 0.7 0.8 0.6 1.3c0 0.1 0 0.1-0.1 0.3C6 15 5.9 15.2 5.9 15.3c-0.1 0.4 0.4 0.7 0.8 0.8c0.8 0.3 1.7-0.2 1.9-0.9 c0.2-0.6-0.2-1.1-0.4-1.2l-0.8-0.9c-0.4-0.4-1.2-1.5-0.8-2.8c0.2-0.5 0.5-1 0.9-1.4c1-0.7 2-0.8 3-0.6c1.3 0.4 1.9 1.2 2.8 1.9 c0.5-1.3 1.1-2.6 2-3.8c0.9-1 2-1.7 3.3-1.8C20 4.8 21 5.4 21 6.3C21 6.7 20.8 7.5 20 7.5z"/></svg></div>\                                    An error occurred while loading the web debug toolbar. <a href="https\u003A\/\/127.0.0.1\u003A8000\/_profiler\/' + newToken + '>Open the web profiler.</a>\                                </div>\                            ';                            sfwdt.setAttribute('class', 'sf-toolbar sf-error-toolbar');                        }                    },                    options                );                return this;            },            toggle: function(selector, elOn, elOff) {                var tmp = elOn.style.display,                    el = document.getElementById(selector);                elOn.style.display = elOff.style.display;                elOff.style.display = tmp;                if (el) {                    el.style.display = 'none' === tmp ? 'none' : 'block';                }                return this;            },            createTabs: function() {                var tabGroups = document.querySelectorAll('.sf-tabs:not([data-processed=true])');                /* create the tab navigation for each group of tabs */                for (var i = 0; i < tabGroups.length; i++) {                    var tabs = tabGroups[i].querySelectorAll(':scope > .tab');                    var tabNavigation = document.createElement('ul');                    tabNavigation.className = 'tab-navigation';                    var selectedTabId = 'tab-' + i + '-0'; /* select the first tab by default */                    for (var j = 0; j < tabs.length; j++) {                        var tabId = 'tab-' + i + '-' + j;                        var tabTitle = tabs[j].querySelector('.tab-title').innerHTML;                        var tabNavigationItem = document.createElement('li');                        tabNavigationItem.setAttribute('data-tab-id', tabId);                        if (hasClass(tabs[j], 'active')) { selectedTabId = tabId; }                        if (hasClass(tabs[j], 'disabled')) { addClass(tabNavigationItem, 'disabled'); }                        tabNavigationItem.innerHTML = tabTitle;                        tabNavigation.appendChild(tabNavigationItem);                        var tabContent = tabs[j].querySelector('.tab-content');                        tabContent.parentElement.setAttribute('id', tabId);                    }                    tabGroups[i].insertBefore(tabNavigation, tabGroups[i].firstChild);                    addClass(document.querySelector('[data-tab-id="' + selectedTabId + '"]'), 'active');                }                /* display the active tab and add the 'click' event listeners */                for (i = 0; i < tabGroups.length; i++) {                    tabNavigation = tabGroups[i].querySelectorAll(':scope > .tab-navigation li');                    for (j = 0; j < tabNavigation.length; j++) {                        tabId = tabNavigation[j].getAttribute('data-tab-id');                        document.getElementById(tabId).querySelector('.tab-title').className = 'hidden';                        if (hasClass(tabNavigation[j], 'active')) {                            document.getElementById(tabId).className = 'block';                        } else {                            document.getElementById(tabId).className = 'hidden';                        }                        tabNavigation[j].addEventListener('click', function(e) {                            var activeTab = e.target || e.srcElement;                            /* needed because when the tab contains HTML contents, user can click */                            /* on any of those elements instead of their parent '<li>' element */                            while (activeTab.tagName.toLowerCase() !== 'li') {                                activeTab = activeTab.parentNode;                            }                            /* get the full list of tabs through the parent of the active tab element */                            var tabNavigation = activeTab.parentNode.children;                            for (var k = 0; k < tabNavigation.length; k++) {                                var tabId = tabNavigation[k].getAttribute('data-tab-id');                                document.getElementById(tabId).className = 'hidden';                                removeClass(tabNavigation[k], 'active');                            }                            addClass(activeTab, 'active');                            var activeTabId = activeTab.getAttribute('data-tab-id');                            document.getElementById(activeTabId).className = 'block';                        });                    }                    tabGroups[i].setAttribute('data-processed', 'true');                }            },            createToggles: function() {                var toggles = document.querySelectorAll('.sf-toggle:not([data-processed=true])');                for (var i = 0; i < toggles.length; i++) {                    var elementSelector = toggles[i].getAttribute('data-toggle-selector');                    var element = document.querySelector(elementSelector);                    addClass(element, 'sf-toggle-content');                    if (toggles[i].hasAttribute('data-toggle-initial') && toggles[i].getAttribute('data-toggle-initial') == 'display') {                        addClass(toggles[i], 'sf-toggle-on');                        addClass(element, 'sf-toggle-visible');                    } else {                        addClass(toggles[i], 'sf-toggle-off');                        addClass(element, 'sf-toggle-hidden');                    }                    addEventListener(toggles[i], 'click', function(e) {                        e.preventDefault();                        if ('' !== window.getSelection().toString()) {                            /* Don't do anything on text selection */                            return;                        }                        var toggle = e.target || e.srcElement;                        /* needed because when the toggle contains HTML contents, user can click */                        /* on any of those elements instead of their parent '.sf-toggle' element */                        while (!hasClass(toggle, 'sf-toggle')) {                            toggle = toggle.parentNode;                        }                        var element = document.querySelector(toggle.getAttribute('data-toggle-selector'));                        toggleClass(toggle, 'sf-toggle-on');                        toggleClass(toggle, 'sf-toggle-off');                        toggleClass(element, 'sf-toggle-hidden');                        toggleClass(element, 'sf-toggle-visible');                        /* the toggle doesn't change its contents when clicking on it */                        if (!toggle.hasAttribute('data-toggle-alt-content')) {                            return;                        }                        if (!toggle.hasAttribute('data-toggle-original-content')) {                            toggle.setAttribute('data-toggle-original-content', toggle.innerHTML);                        }                        var currentContent = toggle.innerHTML;                        var originalContent = toggle.getAttribute('data-toggle-original-content');                        var altContent = toggle.getAttribute('data-toggle-alt-content');                        toggle.innerHTML = currentContent !== altContent ? altContent : originalContent;                    });                    /* Prevents from disallowing clicks on links inside toggles */                    var toggleLinks = toggles[i].querySelectorAll('a');                    for (var j = 0; j < toggleLinks.length; j++) {                        addEventListener(toggleLinks[j], 'click', function(e) {                            e.stopPropagation();                        });                    }                    /* Prevents from disallowing clicks on "copy to clipboard" elements inside toggles */                    var copyToClipboardElements = toggles[i].querySelectorAll('span[data-clipboard-text]');                    for (var k = 0; k < copyToClipboardElements.length; k++) {                        addEventListener(copyToClipboardElements[k], 'click', function(e) {                            e.stopPropagation();                        });                    }                    toggles[i].setAttribute('data-processed', 'true');                }            },            initializeLogsTable: function() {                Sfjs.updateLogsTable();                document.querySelectorAll('.log-filter input').forEach((input) => {                    input.addEventListener('change', () => { Sfjs.updateLogsTable(); });                });                document.querySelectorAll('.filter-select-all-or-none button').forEach((link) => {                    link.addEventListener('click', () => {                        const selectAll = link.classList.contains('select-all');                        link.closest('.log-filter-content').querySelectorAll('input').forEach((input) => {                            input.checked = selectAll;                        });                        Sfjs.updateLogsTable();                    });                });                document.body.addEventListener('click', (event) => {                    document.querySelectorAll('details.log-filter').forEach((filterElement) => {                        if (!filterElement.contains(event.target) && filterElement.open) {                            filterElement.open = false;                        }                    });                });            },            updateLogsTable: function() {                const selectedType = document.querySelector('#log-filter-type input:checked').value;                const priorities = document.querySelectorAll('#log-filter-priority input');                const allPriorities = Array.from(priorities).map((input) => input.value);                const selectedPriorities = Array.from(priorities).filter((input) => input.checked).map((input) => input.value);                const channels = document.querySelectorAll('#log-filter-channel input');                const selectedChannels = Array.from(channels).filter((input) => input.checked).map((input) => input.value);                const logs = document.querySelector('table.logs');                if (null === logs) {                    return;                }                /* hide rows that don't match the current filters */                let numVisibleRows = 0;                logs.querySelectorAll('tbody tr').forEach((row) => {                    if ('all' !== selectedType && selectedType !== row.getAttribute('data-type')) {                        row.style.display = 'none';                        return;                    }                    const priority = row.getAttribute('data-priority');                    if (false === selectedPriorities.includes(priority) && true === allPriorities.includes(priority)) {                        row.style.display = 'none';                        return;                    }                    if ('' !== row.getAttribute('data-channel') && false === selectedChannels.includes(row.getAttribute('data-channel'))) {                        row.style.display = 'none';                        return;                    }                    row.style.display = 'table-row';                    numVisibleRows++;                });                document.querySelector('table.logs').style.display = 0 === numVisibleRows ? 'none' : 'table';                document.querySelector('.no-logs-message').style.display = 0 === numVisibleRows ? 'block' : 'none';                /* update the selected totals of all filters */                document.querySelector('#log-filter-priority .filter-active-num').innerText = (priorities.length === selectedPriorities.length) ? 'All' : selectedPriorities.length;                document.querySelector('#log-filter-channel .filter-active-num').innerText = (channels.length === selectedChannels.length) ? 'All' : selectedChannels.length;                /* update the currently selected "log type" tab */                document.querySelectorAll('#log-filter-type li').forEach((tab) => tab.classList.remove('active'));                document.querySelector(`#log-filter-type input[value="${selectedType}"]`).parentElement.classList.add('active');            },        };    })();    Sfjs.addEventListener(document, 'DOMContentLoaded', function() {        Sfjs.createTabs();        Sfjs.createToggles();    });}/*]]>*/</script><style nonce="932e28dfe077e1a5d5d8edbcf344a6f9">    .sf-minitoolbar {    background-color: #222;    border-top-left-radius: 4px;    bottom: 0;    box-sizing: border-box;    display: none;    height: 36px;    padding: 6px;    position: fixed;    right: 0;    z-index: 99999;}.sf-minitoolbar button {    background-color: transparent;    padding: 0;    border: none;}.sf-minitoolbar svg,.sf-minitoolbar img {    max-height: 24px;    max-width: 24px;    display: inline;}.sf-toolbar-clearer {    clear: both;    height: 36px;}.sf-display-none {    display: none;}.sf-toolbarreset * {    box-sizing: content-box;    vertical-align: baseline;    letter-spacing: normal;    width: auto;}.sf-toolbarreset {    background-color: #222;    bottom: 0;    box-shadow: 0 -1px 0 rgba(0, 0, 0, 0.2);    color: #EEE;    font: 11px Arial, sans-serif;    left: 0;    margin: 0;    padding: 0 36px 0 0;    position: fixed;    right: 0;    text-align: left;    text-transform: none;    z-index: 99999;    direction: ltr;    /* neutralize the aliasing defined by external CSS styles */    -webkit-font-smoothing: subpixel-antialiased;    -moz-osx-font-smoothing: auto;}.sf-toolbarreset abbr {    border: dashed #777;    border-width: 0 0 1px;}.sf-toolbarreset svg,.sf-toolbarreset img {    height: 20px;    width: 20px;    display: inline-block;}.sf-toolbarreset .sf-cancel-button {    color: #444;}.sf-toolbarreset .hide-button {    background: #444;    display: block;    position: absolute;    top: 0;    right: 0;    width: 36px;    height: 36px;    cursor: pointer;    text-align: center;    border: none;    margin: 0;    padding: 0;}.sf-toolbarreset .hide-button svg {    max-height: 18px;    margin-top: 1px;}.sf-toolbar-block {    cursor: default;    display: block;    float: left;    height: 36px;    margin-right: 0;    white-space: nowrap;    max-width: 15%;}.sf-toolbar-block > a,.sf-toolbar-block > a:hover {    display: block;    text-decoration: none;    background-color: transparent;    color: inherit;}.sf-toolbar-block span {    display: inline-block;}.sf-toolbar-block .sf-toolbar-value {    color: #F5F5F5;    font-size: 13px;    line-height: 36px;    padding: 0;}.sf-toolbar-block .sf-toolbar-label,.sf-toolbar-block .sf-toolbar-class-separator {    color: #AAA;    font-size: 12px;}.sf-toolbar-block .sf-toolbar-info {    border-collapse: collapse;    display: table;    z-index: 100000;}.sf-toolbar-block hr {    border-top: 1px solid #777;    margin: 4px 0;    padding-top: 4px;}.sf-toolbar-block .sf-toolbar-info-piece {    /* this 'border-bottom' trick is needed because 'margin-bottom' doesn't work for table rows */    border-bottom: solid transparent 3px;    display: table-row;}.sf-toolbar-block .sf-toolbar-info-piece-additional,.sf-toolbar-block .sf-toolbar-info-piece-additional-detail {    display: none;}.sf-toolbar-block .sf-toolbar-info-group {    margin-bottom: 4px;    padding-bottom: 2px;    border-bottom: 1px solid #333333;}.sf-toolbar-block .sf-toolbar-info-group:last-child {    margin-bottom: 0;    padding-bottom: 0;    border-bottom: none;}.sf-toolbar-block .sf-toolbar-info-piece .sf-toolbar-status {    padding: 2px 5px;    margin-bottom: 0;}.sf-toolbar-block .sf-toolbar-info-piece .sf-toolbar-status + .sf-toolbar-status {    margin-left: 4px;}.sf-toolbar-block .sf-toolbar-info-piece:last-child {    margin-bottom: 0;}div.sf-toolbar .sf-toolbar-block .sf-toolbar-info-piece a {    color: #99CDD8;    text-decoration: underline;}div.sf-toolbar .sf-toolbar-block a:hover {    text-decoration: none;}.sf-toolbar-block .sf-toolbar-info-piece b {    color: #AAA;    display: table-cell;    font-size: 11px;    padding: 4px 8px 4px 0;}.sf-toolbar-block:not(.sf-toolbar-block-dump) .sf-toolbar-info-piece span {    color: #F5F5F5;}.sf-toolbar-block .sf-toolbar-info-piece span {    font-size: 12px;}.sf-toolbar-block .sf-toolbar-info {    background-color: #444;    bottom: 36px;    color: #F5F5F5;    display: none;    padding: 9px 0;    position: absolute;}.sf-toolbar-block .sf-toolbar-info:empty {    visibility: hidden;}.sf-toolbar-block .sf-toolbar-status {    display: inline-block;    color: #FFF;    background-color: #666;    padding: 3px 6px;    margin-bottom: 2px;    vertical-align: middle;    min-width: 15px;    min-height: 13px;    text-align: center;}.sf-toolbar-block .sf-toolbar-status-green {    background-color: #4F805D;}.sf-toolbar-block .sf-toolbar-status-red {    background-color: #B0413E;}.sf-toolbar-block .sf-toolbar-status-yellow {    background-color: #A46A1F;}.sf-toolbar-block.sf-toolbar-status-green {    background-color: #4F805D;    color: #FFF;}.sf-toolbar-block.sf-toolbar-status-red {    background-color: #B0413E;    color: #FFF;}.sf-toolbar-block.sf-toolbar-status-yellow {    background-color: #A46A1F;    color: #FFF;}.sf-toolbar-block-request .sf-toolbar-status {    color: #FFF;    display: inline-block;    font-size: 14px;    height: 36px;    line-height: 36px;    padding: 0 10px;}.sf-toolbar-block-request .sf-toolbar-info-piece a {    background-color: transparent;    text-decoration: none;}.sf-toolbar-block-request .sf-toolbar-info-piece a:hover {    text-decoration: underline;}.sf-toolbar-block-request .sf-toolbar-redirection-status {    font-weight: normal;    padding: 2px 4px;    line-height: 18px;}.sf-toolbar-block-request .sf-toolbar-info-piece span.sf-toolbar-redirection-method {    font-size: 12px;    height: 17px;    line-height: 17px;    margin-right: 5px;}.sf-toolbar-block-ajax .sf-toolbar-icon {    cursor: pointer;}.sf-toolbar-status-green .sf-toolbar-label,.sf-toolbar-status-yellow .sf-toolbar-label,.sf-toolbar-status-red .sf-toolbar-label {    color: #FFF;}.sf-toolbar-status-green svg path,.sf-toolbar-status-green svg .sf-svg-path,.sf-toolbar-status-red svg path,.sf-toolbar-status-red svg .sf-svg-path,.sf-toolbar-status-yellow svg path,.sf-toolbar-status-yellow svg .sf-svg-path {    fill: #FFF;}.sf-toolbar-block-config svg path,.sf-toolbar-block-config svg .sf-svg-path {    fill: #FFF;}.sf-toolbar-block .sf-toolbar-icon {    display: block;    height: 36px;    padding: 0 7px;    overflow: hidden;    text-overflow: ellipsis;}.sf-toolbar-block-request .sf-toolbar-icon {    padding-left: 0;    padding-right: 0;}.sf-toolbar-block .sf-toolbar-icon img,.sf-toolbar-block .sf-toolbar-icon svg {    border-width: 0;    position: relative;    top: 8px;    vertical-align: baseline;}.sf-toolbar-block .sf-toolbar-icon img + span,.sf-toolbar-block .sf-toolbar-icon svg + span {    margin-left: 4px;}.sf-toolbar-block-config .sf-toolbar-icon .sf-toolbar-value {    margin-left: 4px;}.sf-toolbar-block:hover,.sf-toolbar-block.hover {    position: relative;}.sf-toolbar-block:hover .sf-toolbar-icon,.sf-toolbar-block.hover .sf-toolbar-icon {    background-color: #444;    position: relative;    z-index: 10002;}.sf-toolbar-block-ajax.hover .sf-toolbar-info {    z-index: 10001;}.sf-toolbar-block:hover .sf-toolbar-info,.sf-toolbar-block.hover .sf-toolbar-info {    display: block;    padding: 10px;    max-width: 525px;    max-height: 480px;    word-wrap: break-word;    overflow: hidden;    overflow-y: auto;}.sf-toolbar-info-piece b.sf-toolbar-ajax-info {    color: #F5F5F5;}.sf-toolbar-ajax-requests {    table-layout: auto;    width: 100%;}.sf-toolbar-ajax-requests td {    background-color: #444;    border-bottom: 1px solid #777;    color: #F5F5F5;    font-size: 12px;    padding: 4px;}.sf-toolbar-ajax-requests tr:last-child td {    border-bottom: 0;}.sf-toolbar-ajax-requests th {    background-color: #222;    border-bottom: 0;    color: #AAA;    font-size: 11px;    padding: 4px;}.sf-ajax-request-url {    max-width: 250px;    line-height: 9px;    overflow: hidden;    text-overflow: ellipsis;}.sf-toolbar-ajax-requests .sf-ajax-request-url a {    text-decoration: none;}.sf-toolbar-ajax-requests .sf-ajax-request-url a:hover {    text-decoration: underline;}.sf-ajax-request-duration {    text-align: right;}.sf-ajax-request-loading {    animation: sf-blink .5s ease-in-out infinite;}@keyframes sf-blink {    0% { background: #222; }    50% { background: #444; }    100% { background: #222; }}.sf-toolbar-block.sf-toolbar-block-dump .sf-toolbar-info {    max-width: none;    width: 100%;    position: fixed;    box-sizing: border-box;    left: 0;}.sf-toolbar-block-dump pre.sf-dump {    background-color: #222;    border-color: #777;    border-radius: 0;    margin: 6px 0 12px 0;}.sf-toolbar-block-dump pre.sf-dump:last-child {    margin-bottom: 0;}.sf-toolbar-block-dump pre.sf-dump .sf-dump-search-wrapper {    margin-bottom: 5px;}.sf-toolbar-block-dump pre.sf-dump span.sf-dump-search-count {    color: #333;    font-size: 12px;}.sf-toolbar-block-dump .sf-toolbar-info-piece {    display: block;}.sf-toolbar-block-dump .sf-toolbar-info-piece .sf-toolbar-file-line {    color: #AAA;    margin-left: 4px;}.sf-toolbar-block-dump .sf-toolbar-info img {    display: none;}/* Responsive Design */.sf-toolbar-icon .sf-toolbar-label,.sf-toolbar-icon .sf-toolbar-value {    display: none;}.sf-toolbar-block-config .sf-toolbar-icon .sf-toolbar-label {    display: inline-block;}/* Legacy Design - these styles are maintained to make old panels look   a bit better on the new toolbar */.sf-toolbar-block .sf-toolbar-info-piece-additional-detail {    color: #AAA;    font-size: 12px;}.sf-toolbar-status-green .sf-toolbar-info-piece-additional-detail,.sf-toolbar-status-yellow .sf-toolbar-info-piece-additional-detail,.sf-toolbar-status-red .sf-toolbar-info-piece-additional-detail {    color: #FFF;}@media (min-width: 768px) {    .sf-toolbar-icon .sf-toolbar-label,    .sf-toolbar-icon .sf-toolbar-value {        display: inline;    }    .sf-toolbar-block .sf-toolbar-icon img,    .sf-toolbar-block .sf-toolbar-icon svg {        top: 6px;    }    .sf-toolbar-block-time .sf-toolbar-icon svg,    .sf-toolbar-block-memory .sf-toolbar-icon svg {        display: none;    }    .sf-toolbar-block-time .sf-toolbar-icon svg + span,    .sf-toolbar-block-memory .sf-toolbar-icon svg + span {        margin-left: 0;    }    .sf-toolbar-block .sf-toolbar-icon {        padding: 0 10px;    }    .sf-toolbar-block-time .sf-toolbar-icon {        padding-right: 5px;    }    .sf-toolbar-block-memory .sf-toolbar-icon {        padding-left: 5px;    }    .sf-toolbar-block-request .sf-toolbar-icon {        padding-left: 0;        padding-right: 0;    }    .sf-toolbar-block-request .sf-toolbar-label {        margin-left: 5px;    }    .sf-toolbar-block-request .sf-toolbar-status + svg {        margin-left: 5px;    }    .sf-toolbar-block-request .sf-toolbar-icon svg + .sf-toolbar-label {        margin-left: 0;     }    .sf-toolbar-block-request .sf-toolbar-label + .sf-toolbar-value {        margin-right: 10px;    }    .sf-toolbar-block-request:hover .sf-toolbar-info {        max-width: none;    }    .sf-toolbar-block .sf-toolbar-info-piece b {        font-size: 12px;    }    .sf-toolbar-block .sf-toolbar-info-piece span {        font-size: 13px;    }    .sf-toolbar-block-right {        float: right;        margin-left: 0;        margin-right: 0;    }}@media (min-width: 1024px) {    .sf-toolbar-block .sf-toolbar-info-piece-additional,    .sf-toolbar-block .sf-toolbar-info-piece-additional-detail {        display: inline;    }    .sf-toolbar-block .sf-toolbar-info-piece-additional:empty,    .sf-toolbar-block .sf-toolbar-info-piece-additional-detail:empty {        display: none;    }}/***** Error Toolbar *****/.sf-error-toolbar .sf-toolbarreset {    background: #222;    color: #f5f5f5;    font: 13px/36px Arial, sans-serif;    height: 36px;    padding: 0 15px;    text-align: left;}.sf-error-toolbar .sf-toolbarreset svg {    height: auto;}.sf-error-toolbar .sf-toolbarreset a {    color: #99cdd8;    margin-left: 5px;    text-decoration: underline;}.sf-error-toolbar .sf-toolbarreset a:hover {    text-decoration: none;}.sf-error-toolbar .sf-toolbarreset .sf-toolbar-icon {    float: left;    padding: 5px 0;    margin-right: 10px;}.sf-full-stack {    left: 0px;    font-size: 12px;}/***** Media query print: Do not print the Toolbar. *****/@media print {    .sf-toolbar {        display: none !important;    }}</style><script nonce="987e6fb58d270851adc63ca78dcb0599">/*<![CDATA[*/    (function () {        Sfjs.loadToolbar('aeaf2c');    })();/*]]>*/</script>
</body>

</html>

<script>
    function prixDeVente(){


        $('#composant_DUHT').val($('#composant_DUHT').val().replaceAll(',','.'))
        $('#composant_marge').val($('#composant_marge').val().replaceAll(',','.'))
        const prix =$('#composant_DUHT').val();
        const marge = $('#composant_marge').val();

        const prixDeVente = prix * marge ;

        console.log(prixDeVente);

        $('#composant_prix_de_vente').val(prixDeVente.toFixed(3));

    }
</script>
