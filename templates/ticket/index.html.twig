{% extends 'base.html.twig' %}

{% block title %}Tickets
{% endblock %}

{% block body %}
	<style>
		.bg-blue {
			font-size: 0.75rem !important;
			overflow: hidden;
			text-overflow: ellipsis;
			height: calc(1em + 0.375rem + 2px) !important;
			padding: 0 0.25rem !important;
			background: rgba(14, 67, 119, 0.1);
			border-radius: 5px !important;
			white-space: nowrap;

		}
		.export-button {
			position: relative;
			display: inline-block;
			box-sizing: border-box;
			margin-right: 0.333em;
			padding: 0.5em 1em;
			border: 1px solid #999;
			border-radius: 2px;
			cursor: pointer;
			font-size: 0.88em;
			color: black;
			white-space: nowrap;
			overflow: hidden;
			background-color: #e9e9e9;
			background-image
		}
	</style>
	<div class="page-block col-lg-12">
		<button class="export-button">
			<a href="{{ path('app_export_excel') }}">Excel</a>
		</button>
		<table class="table text-center datatable" style="color: #0E4377;">
			<thead>
				<tr class="tr-head">
					<th>Id</th>
					<th>Title</th>
					<th>Level</th>
					<th>Status</th>
					<th>Date</th>
					<th>Createur</th>
					<th>Développeur</th>


				</tr>
			</thead>
			<tbody>
				{% for ticket in tickets %}
					<tr>
						<td>
							<a href="{{ path('ticket_assigned',{'id':ticket.id}) }}" style="color: #555;">
								{{ ticket.id }}
							</a>
						</td>
						<td>{{ ticket.title }}</td>
						<td>{{ ticket.level }}</td>
						<td>
							{% if ticket.status == 'En cours' %}
								<span style="color : #FFBF00 ">
									En cours
								</span>
							{% elseif ticket.status == 'En confirmation' %}
								<span style="color : #2EFE2E ">
									En confirmation
								</span>
							{% elseif ticket.status == 'A traiter' %}
								<span style="color : black ">
									{{ ticket.status }}
								</span>

							{% elseif ticket.status == 'Résolu'  %}
								<span style="color : black ">
									<img src="{{ asset('uploads/img/coche.png') }}"/>
								</span>
							{% endif %}
						</td>
						<td>{{ ticket.date }}</td>
						<td>{{ ticket.creator.getFirstname()  }}</td>

						<td>
							{% if ticket.admin is defined %}
								{{ ticket.admin.getFirstname() ?? '' }}
							{% else %}
								{{ '' }}
							{% endif %}
						</td>
					{% else %}
						<tr>
							<td colspan="13">n'est pas tickets</td>
						</tr>
					{% endfor %}

				</tr>

			</tbody>


		</table>
	</div>
{% endblock %}
