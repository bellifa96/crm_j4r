<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>
			{% block title %}Welcome!
			{% endblock %}
		</title>
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Open+Sans&family=Poppins&family=Sometype+Mono&display=swap" rel="stylesheet">
		<script src="https://kit.fontawesome.com/1a4efb3103.js" crossorigin="anonymous"></script>
		<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css">
		<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
		<link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
		<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
		<link
		rel="icon" href="{{ asset('uploads/logo/j4r_logo.png') }}">
		{# Run `composer require symfony/webpack-encore-bundle` to start using Symfony UX #}
		{% block stylesheets %}
			{{ encore_entry_link_tags('app') }}
		{% endblock %}


		<style>
			body .background-body {
				background-image: url({{asset("/build/img/etoiles-background.jpg")}});
				transition: all 0.25s ease-out 0s;
				position: fixed;
				z-index: 1;
				height: 100%;
				width: 100%;
				display: block;
				top: 0;
				left: 0;
				background-size: cover;
				background-position: 50%;
			}
			@import url('https://fonts.googleapis.com/css?family=Poppins:400, 500, 600, 700 &display=swap');


			.alert {
				background: #28a745;
				padding: 20px 40px;
				min-width: 420px;
				position: absolute;
				right: 0;
				top: 10px;
				border-radius: 4px;
				border-left: 8px solid #3A8731;
				overflow: hidden;
				opacity: 0;
				pointer-events: none;
			}

			.alert.showAlert {
				opacity: 1;
				pointer-events: auto;
			}
			.small-button {
				font-size: 12px;
			}

			.alert.show {
				animation: show_slide 1s ease forwards;
			}


			@keyframes show_slide {
				0% {
					transform: translateX(100%);
				}

				40% {
					transform: translateX(-10%);
				}

				80% {
					transform: translateX(0%);
				}

				100% {
					transform: translateX(-10px);
				}
			}

			.alert.hide {
				animation: hide_slide 1s ease forwards;
			}

			@keyframes hide_slide {
				0% {
					transform: translateX(-10px);
				}

				40% {
					transform: translateX(0%);
				}

				80% {
					transform: translateX(-10%);
				}

				100% {
					transform: translateX(100%);
				}
			}

			.alert.fa-check-circle {
				position: absolute;
				left: 20px;
				top: 50%;
				transform: translateY(-50%);
				color: #28a745;
				font-size: 60px;
			}

			.alert .msg {
				padding: 0 20px;
				font-size: 18px;
				color: white;
			}


			.alertError {
				background: #D30000;
				padding: 20px 40px;
				min-width: 420px;
				position: absolute;
				right: 0;
				top: 10px;
				border-radius: 4px;
				border-left: 8px solid #A20505;
				overflow: hidden;
				opacity: 0;
				pointer-events: none;
			}

			.alertError.showAlert {
				opacity: 1;
				pointer-events: auto;
			}

			.alertError.show {
				animation: show_slide 1s ease forwards;
			}


			@keyframes show_slide {
				0% {
					transform: translateX(100%);
				}

				40% {
					transform: translateX(-10%);
				}

				80% {
					transform: translateX(0%);
				}

				100% {
					transform: translateX(-10px);
				}
			}

			.alertError.hide {
				animation: hide_slide 1s ease forwards;
			}

			@keyframes hide_slide {
				0% {
					transform: translateX(-10px);
				}

				40% {
					transform: translateX(0%);
				}

				80% {
					transform: translateX(-10%);
				}

				100% {
					transform: translateX(100%);
				}
			}

			.alertError.fa-check-circle {
				position: absolute;
				left: 20px;
				top: 50%;
				transform: translateY(-50%);
				color: #28a745;
				font-size: 60px;
			}

			.alertError .msg {
				padding: 0 20px;
				font-size: 18px;
				color: white;
			}
			.sidebar-item {
				position: relative;
			}

			.sidebar-item .dropdown-menu {
				display: none;
				position: absolute;
				top: 100%;
				left: 0;
				background-color: #fff;
				box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
				z-index: 1000;
			}

			.sidebar-item:hover .dropdown-menu {
				display: block;
			}
		</style>
		{% block javascripts %}
			{{ encore_entry_script_tags('app') }}


		{% endblock %}
	</head>

	<body class="container-fluid">
		<div class="container-main">
			<div class="background-body"></div>

			<div id="divLoader">
				<div class="loader">
					<span></span>
					<span></span>
					<span></span>
					<span></span>
					<span></span>
				</div>
			</div>


			<div class="container-main">


				<div class="alert hide">
					<span class="fas fa-check-circle"></span>
					<span class="msg" id="msgSucces">La commande a bien été chargée..</span>
				</div>
				<div class="alertError hide">
					<span class="fas fa-check-circle"></span>
					<span id="msgError" class="msg">Error ..</span>
				</div>
				<div class="row">

					<div class="col-md-2" id="nav-main">
						<header class="row header-row" style="margin-left:20%">
							<div class="logo col-md-2">
								<a href="{{ path('app_home') }}"><img id="company-logo" src="{{ asset('uploads/logo/j4r_logo.png') }}" alt="Logo" srcset=""></a>

							</div>

						</header>
						<div class="nav-user">
							<ul class="clearfix nav-user-i">
								<li class="col-md-4">
									<a href="{{ path('app_user_show',{'id':app.user.id}) }}">
										{% if app.user.photo is defined and app.user.photo is not empty %}
											<img style="height: 50px; width: 50px; border-radius: 50%;" src="{{ asset('../uploads/photo/' ~ app.user.photo) }}" alt=""/>
										{% else %}
											<i class="bi bi-person-circle"></i>
										{% endif %}
									</a>
								</li>
								<li class="col-md-4">
									<a href="/logout">
										<i class="bi bi-power"></i>
									</a>
								</li>
							</ul>
						</div>
						{% include 'nav.html.twig' %}
					</div>

					<div class="page-content col-md-10">
						{% include 'include/title.html.twig' with {'title': title, 'nav': nav} %}
						{% for flash_message in app.flashes('success') %}
							<div class="alert alert-success">
								{{ flash_message }}
							</div>
						{% endfor %}
						{% block body %}
							{% for type, messages in app.flashes %}
								{% for message in messages %}
									<div class="alert alert-{{ type }}">{{ message }}</div>
								{% endfor %}
							{% endfor %}
						{% endblock %}

					</div>

				</div>
			</div>
		</div>

	</body>

</html>

<script>
	function showFunction(message) {
document.getElementById("msgSucces").innerHTML = message;

$('.alert').addClass("show");
$('.alert').removeClass("hide");
$('.alert').addClass("showAlert");
setTimeout(function () {
$('.alert').removeClass("show");
$('.alert').addClass("hide");
}, 5000);
}

function showError(message) {
document.getElementById("msgError").innerHTML = message;
$('.alertError').addClass("show");
$('.alertError').removeClass("hide");
$('.alertError').addClass("showAlert");
setTimeout(function () {
$('.alertError').removeClass("show");
$('.alertError').addClass("hide");
}, 5000);
}
function prixDeVente() {


$('#composant_DUHT').val($('#composant_DUHT').val().replaceAll(',', '.'))
$('#composant_marge').val($('#composant_marge').val().replaceAll(',', '.'))
const prix = $('#composant_DUHT').val();
const marge = $('#composant_marge').val();

const prixDeVente = prix * marge;

console.log(prixDeVente);

$('#composant_prix_de_vente').val(prixDeVente.toFixed(3));

}
</script>
